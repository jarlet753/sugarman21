<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Party Games">
    <title>Party Games - Impostor</title>
    
    <!-- PWA Icons -->
    <link rel="apple-touch-icon" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mP8/5+hHgAHggJ/PchI7wAAAABJRU5ErkJggg==">
    <link rel="icon" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mP8/5+hHgAHggJ/PchI7wAAAABJRU5ErkJggg==">
    <meta name="theme-color" content="#ff453a">
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
            -webkit-tap-highlight-color: transparent;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            overflow: hidden;
            height: 100vh;
            width: 100vw;
            margin: 0;
            padding: 0;
            overscroll-behavior: none;
            touch-action: manipulation;
        }
        
        .screen {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 20px;
            transition: opacity 0.3s ease;
            overflow-y: auto;
            -webkit-overflow-scrolling: touch;
            overscroll-behavior: contain;
            touch-action: pan-y;
        }
        
        .hidden {
            opacity: 0;
            pointer-events: none;
        }
        
        /* Background Gradients - UPDATED */
        .home-bg {
            background: #000000;
        }
        
        .impostor-bg {
            background: #ff453a;
        }

        
        /* Settings Icon - Clean Apple UI Style - VERBESSERTER KONTRAST */
        .settings-icon {
            position: fixed;
            bottom: clamp(25px, 6vw, 35px);
            left: clamp(20px, 5vw, 30px);
            background: rgba(28, 28, 30, 0.95);
            border: none;
            border-radius: 50%;
            color: white;
            font-size: clamp(18px, 4.5vw, 22px);
            width: clamp(52px, 13vw, 60px);
            height: clamp(52px, 13vw, 60px);
            cursor: pointer;
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            box-shadow: 0 8px 24px rgba(0,0,0,0.3);
            border: 2px solid rgba(255,255,255,0.2);
        }
        
        .settings-icon:active {
            transform: scale(0.92);
            background: rgba(28, 28, 30, 0.9);
            box-shadow: 0 4px 16px rgba(0,0,0,0.4);
        }
        
        .settings-icon:hover {
            background: rgba(48, 48, 52, 0.95);
            transform: scale(1.05);
        }
        
        /* Clean Settings Symbol */
        .settings-icon::before {
            content: '';
            width: 20px;
            height: 20px;
            background: currentColor;
            mask: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='currentColor'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z'/%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M15 12a3 3 0 11-6 0 3 3 0 016 0z'/%3E%3C/svg%3E") no-repeat center;
            mask-size: contain;
            -webkit-mask: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='currentColor'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z'/%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M15 12a3 3 0 11-6 0 3 3 0 016 0z'/%3E%3C/svg%3E") no-repeat center;
            -webkit-mask-size: contain;
        }
        
        /* Info Icon - VERBESSERTER KONTRAST */
        .info-icon {
            position: fixed;
            bottom: clamp(25px, 6vw, 35px);
            right: clamp(20px, 5vw, 30px);
            background: rgba(28, 28, 30, 0.95);
            border: none;
            border-radius: 50%;
            color: white;
            font-size: clamp(18px, 4.5vw, 22px);
            width: clamp(52px, 13vw, 60px);
            height: clamp(52px, 13vw, 60px);
            cursor: pointer;
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            box-shadow: 0 8px 24px rgba(0,0,0,0.3);
            border: 2px solid rgba(255,255,255,0.2);
        }
        
        .info-icon:active {
            transform: scale(0.92);
            background: rgba(28, 28, 30, 0.9);
            box-shadow: 0 4px 16px rgba(0,0,0,0.4);
        }
        
        .info-icon:hover {
            background: rgba(48, 48, 52, 0.95);
            transform: scale(1.05);
        }
        
        /* Info Symbol */
        .info-icon::before {
            content: '';
            width: 20px;
            height: 20px;
            background: currentColor;
            mask: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='currentColor'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z'/%3E%3C/svg%3E") no-repeat center;
            mask-size: contain;
            -webkit-mask: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='currentColor'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z'/%3E%3C/svg%3E") no-repeat center;
            -webkit-mask-size: contain;
        }
        
        /* Modern Settings Menu - VERBESSERTER KONTRAST */
        .settings-menu {
            position: fixed;
            bottom: clamp(90px, 20vw, 110px);
            left: clamp(20px, 5vw, 30px);
            background: rgba(28, 28, 30, 0.95);
            border-radius: 24px;
            padding: 8px;
            min-width: 220px;
            max-width: 280px;
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid rgba(255,255,255,0.25);
            box-shadow: 0 20px 60px rgba(0,0,0,0.15);
            z-index: 999;
            opacity: 0;
            transform: translateY(10px) scale(0.95);
            transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
            pointer-events: none;
        }
        
        .settings-menu.visible {
            opacity: 1;
            transform: translateY(0) scale(1);
            pointer-events: auto;
        }
        
        .settings-menu-item {
            padding: 16px 20px;
            color: white;
            cursor: pointer;
            border-radius: 16px;
            margin-bottom: 4px;
            font-size: clamp(15px, 3.5vw, 17px);
            font-weight: 500;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .settings-menu-item:hover, .settings-menu-item:active {
            background: rgba(255,255,255,0.15);
            transform: scale(0.98);
        }
        
        .settings-menu-item.version {
            color: rgba(255,255,255,0.4);
            cursor: default;
            pointer-events: none;
        }
        
        .settings-menu-item.version:hover, .settings-menu-item.version:active {
            background: transparent;
            transform: none;
        }
        
        .settings-menu-item:last-child {
            margin-bottom: 0;
        }
        
        /* Header Container - WENIGER ABSTAND */
        .header-container {
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            width: 100%;
            height: clamp(80px, 15vh, 100px); /* VIEL KLEINER */
            margin-bottom: 10px; /* WENIGER MARGIN */
            margin-top: 30px; /* WENIGER MARGIN */
        }
        
        /* Typography - GRÖßERE HEADLINE */
        .title {
            font-size: clamp(38px, 11vw, 64px); /* GRÖßER */
            font-weight: 800;
            color: white;
            text-align: center;
            text-shadow: 0 4px 20px rgba(0,0,0,0.3);
            line-height: 1;
            z-index: 2;
            position: relative;
        }
        
        .title-suffix {
            font-size: clamp(16px, 4.5vw, 26px); /* GRÖßER */
            color: rgba(255,255,255,0.6);
            font-weight: 400;
            margin-left: 8px;
        }
        
        /* Controller Emoji - GRÖßER */
        .controller-emoji {
            font-size: clamp(35px, 9vw, 60px); /* GRÖßER */
            position: absolute;
            left: clamp(-5px, 2vw, 15px);
            top: clamp(-20px, -4vw, -12px); /* MEHR OFFSET */
            transform: rotate(-15deg);
            filter: drop-shadow(0 4px 8px rgba(0,0,0,0.3));
            opacity: 0.85;
            z-index: 3;
            animation: float 3s ease-in-out infinite;
        }
        
        @keyframes float {
            0%, 100% { 
                transform: rotate(-15deg) translateY(0px); 
            }
            50% { 
                transform: rotate(-15deg) translateY(-8px); 
            }
        }
        
        /* Game Cards Container - FIXED */
        .games-container {
            display: flex;
            gap: 20px;
            width: 100%;
            max-width: 100vw;
            overflow-x: auto;
            scroll-snap-type: x mandatory;
            -webkit-overflow-scrolling: touch;
            scrollbar-width: none;
            -ms-overflow-style: none;
            padding: 0 20px;
            margin-bottom: 20px; /* MEHR ABSTAND ZU PUNKTEN */
        }
        
        .games-container::-webkit-scrollbar {
            display: none;
        }
        
        /* WIRKLICH SMOOTH TRANSITION */
        .screen-transition {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #000000;
            z-index: 9999;
            opacity: 0;
            pointer-events: none;
            transition: all 0.2s cubic-bezier(0.25, 0.1, 0.25, 1); /* ULTRA SMOOTH */
        }

        .screen-transition.active {
            opacity: 1;
            pointer-events: auto;
        }

        .screen-transition.impostor {
            background: #ff453a;
        }

        /* DARK MODE KONSEQUENT UMGESETZT */
        body {
            background: #000000;
            color: white;
        }

        /* CLEAN DARK THEME FÜR ALLE SETTINGS - VERBESSERTER KONTRAST */
        
        /* IMPOSTOR SETTINGS SCREEN - VERBESSERTER KONTRAST */
        .settings-container {
            background: rgba(28, 28, 30, 0.95);
            border: 1px solid rgba(255,255,255,0.2);
        }

        .setting-label {
            color: white;
        }

        .counter-btn {
            background: rgba(44, 44, 48, 0.95);
            color: white;
            border: 1px solid rgba(255,255,255,0.15);
        }

        .counter-btn:hover {
            background: rgba(58, 58, 64, 0.95);
        }

        .counter-value {
            color: white;
        }

        .toggle-switch {
            background: rgba(44, 44, 48, 0.95);
            border: 1px solid rgba(255,255,255,0.15);
        }

        .dropdown-button {
            background: rgba(44, 44, 48, 0.95);
            color: white;
            border: 1px solid rgba(255,255,255,0.15);
        }

        .dropdown-button:hover {
            background: rgba(58, 58, 64, 0.95);
        }

        .dropdown-menu {
            background: rgba(28, 28, 30, 0.95) !important;
            color: white !important;
            border: 1px solid rgba(255,255,255,0.25) !important;
        }

        .dropdown-item {
            color: white !important;
        }

        .dropdown-item:hover, .dropdown-item:active {
            background: rgba(255,255,255,0.15) !important;
        }

        /* GAME SCREEN - CLEAN DARK */
        .player-title {
            color: white;
        }

        .reveal-button {
            color: white;
        }

        /* GAME STARTED SCREEN - CLEAN DARK */
        .goal-box {
            background: rgba(28, 28, 30, 0.95);
            border: 1px solid rgba(255,255,255,0.2);
        }

        .goal-title {
            color: white;
        }

        .goal-item {
            color: white;
        }

        .starter-text {
            color: white;
        }

        /* ROLES SCREEN - CLEAN DARK */
        .role-item {
            background: rgba(28, 28, 30, 0.95);
            border: 1px solid rgba(255,255,255,0.2);
            color: white;
        }

        .role-player {
            color: white;
        }

        .role-result {
            color: white;
        }

        .timer-display {
            background: rgba(28, 28, 30, 0.95);
            color: white;
            border: 1px solid rgba(255,255,255,0.2);
        }

        /* MODAL - VERBESSERTER KONTRAST */
        .modal {
            background: rgba(28, 28, 30, 0.95);
            color: white;
            border: 2px solid rgba(255,255,255,0.2);
        }

        .modal-close {
            background: rgba(255,255,255,0.15);
            color: white;
            border: 1px solid rgba(255,255,255,0.1);
        }

        .modal-close:hover, .modal-close:active {
            background: rgba(255,255,255,0.25);
        }

        .modal-title {
            color: white;
        }

        /* STATS - VERBESSERTER KONTRAST */
        .stat-item {
            background: rgba(44, 44, 48, 0.95);
            color: white;
            border: 1px solid rgba(255,255,255,0.1);
        }

        .stat-value {
            color: white;
        }

        .stat-label {
            color: rgba(255,255,255,0.8);
        }

        /* HISTORY & ACHIEVEMENTS - VERBESSERTER KONTRAST */
        .history-item, 
        .achievement-item {
            background: rgba(44, 44, 48, 0.95);
            border: 2px solid rgba(255,255,255,0.15);
            color: white;
        }

        .achievement-item.unlocked {
            background: rgba(76, 175, 80, 0.3);
            border-color: rgba(76, 175, 80, 0.5);
        }
        
        body.light-theme {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
        }

        body.light-theme .home-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }

        body.light-theme .title {
            color: white;
        }

        body.light-theme .settings-icon,
        body.light-theme .info-icon {
            background: rgba(255,255,255,0.9);
            color: #333;
            border: 2px solid rgba(0,0,0,0.1);
        }

        body.light-theme .settings-icon:active,
        body.light-theme .info-icon:active {
            background: rgba(255,255,255,0.95);
        }

        body.light-theme .settings-icon:hover,
        body.light-theme .info-icon:hover {
            background: rgba(255,255,255,0.92);
        }

        body.light-theme .settings-menu {
            background: rgba(255,255,255,0.95);
            color: #333;
            border: 1px solid rgba(255,255,255,0.4);
        }

        body.light-theme .settings-menu-item {
            color: #333;
        }

        body.light-theme .modal {
            background: rgba(255,255,255,0.95);
            color: #333;
        }

        body.light-theme .modal-close {
            color: #666;
        }

        body.light-theme .modal-title {
            color: #333;
        }

        body.light-theme .game-card {
            box-shadow: 0 20px 60px rgba(0,0,0,0.15);
        }

        body.light-theme .snap-dot {
            background: rgba(255,255,255,0.4);
        }

        body.light-theme .snap-dot.active {
            background: white;
        }

        body.light-theme .back-button {
            background: rgba(255,255,255,0.3);
            color: white;
        }

        /* SETTINGS SCREEN LIGHT THEME */
        body.light-theme .settings-container {
            background: rgba(255,255,255,0.2);
            border: 1px solid rgba(255,255,255,0.15);
        }

        body.light-theme .setting-label {
            color: white;
        }

        body.light-theme .counter-btn {
            background: rgba(255,255,255,0.25);
            color: white;
        }

        body.light-theme .counter-value {
            color: white;
        }

        body.light-theme .toggle-switch {
            background: rgba(255,255,255,0.3);
        }

        body.light-theme .dropdown-button {
            background: rgba(255,255,255,0.25);
            color: white;
        }

        body.light-theme .dropdown-menu {
            background: rgba(255,255,255,0.95);
            color: #333;
        }

        body.light-theme .dropdown-item {
            color: #333;
        }

        body.light-theme .dropdown-item:hover, body.light-theme .dropdown-item:active {
            background: rgba(0,0,0,0.08);
        }

        /* PLAYER CARD LIGHT THEME */
        body.light-theme .player-card {
            box-shadow: 0 16px 40px rgba(0,0,0,0.15);
        }

        body.light-theme .player-title {
            color: white;
        }

        body.light-theme .reveal-button {
            color: white;
        }

        /* GAME STARTED SCREEN LIGHT THEME */
        body.light-theme .goal-box {
            background: rgba(255,255,255,0.25);
            border: 1px solid rgba(255,255,255,0.15);
        }

        body.light-theme .goal-title {
            color: white;
        }

        body.light-theme .goal-item {
            color: white;
        }

        body.light-theme .starter-text {
            color: white;
        }

        /* ROLES SCREEN LIGHT THEME */
        body.light-theme .role-item {
            background: rgba(255,255,255,0.3);
            border: 1px solid rgba(255,255,255,0.1);
            color: white;
        }

        body.light-theme .role-player {
            color: white;
        }

        body.light-theme .role-result {
            color: white;
        }

        body.light-theme .timer-display {
            background: rgba(255,255,255,0.3);
            color: white;
        }

        /* MODAL CONTENT LIGHT THEME */
        body.light-theme .history-item, 
        body.light-theme .achievement-item {
            background: rgba(0,0,0,0.05);
            border: 2px solid rgba(0,0,0,0.08);
        }
        
        /* GAME CARDS REDESIGNED - BESSERE GRÖßE */
        .game-card {
            min-width: calc(100vw - 60px);
            max-width: calc(100vw - 60px);
            height: clamp(360px, 55vh, 450px); /* KLEINER GEMACHT */
            border-radius: 32px;
            padding: 28px; /* WENIGER PADDING */
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: space-between;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            scroll-snap-align: center;
            position: relative;
            overflow: hidden;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
        }
        
        .game-card:active {
            transform: scale(0.96);
        }
        
        .impostor-card {
            background: #ff453a;
            color: white;
            border: 2px solid rgba(255,255,255,0.2);
        }
        
        .impostor-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(45deg, rgba(255,255,255,0.1) 0%, transparent 50%, rgba(0,0,0,0.1) 100%);
            pointer-events: none;
            border-radius: 32px;
        }
        
        .coming-soon-card {
            background: rgba(28, 28, 30, 0.95);
            color: white;
            opacity: 0.7;
            border: 2px solid rgba(255,255,255,0.15);
        }
        
        .game-card-emoji {
            font-size: clamp(60px, 15vw, 75px); /* KLEINER */
            margin-bottom: 20px;
            filter: drop-shadow(0 4px 12px rgba(0,0,0,0.3));
            background: rgba(255,255,255,0.15);
            width: clamp(100px, 22vw, 120px); /* KLEINER */
            height: clamp(100px, 22vw, 120px);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .game-card-title {
            font-size: clamp(20px, 5vw, 25px); /* KLEINER */
            font-weight: 700;
            margin-bottom: 14px;
            text-align: center;
            text-shadow: 0 2px 8px rgba(0,0,0,0.3);
            letter-spacing: -0.5px;
            line-height: 1.1; /* FÜR MEHRZEILIGE TITEL */
        }
        
        .game-card-desc {
            font-size: clamp(14px, 3.5vw, 17px); /* KLEINER */
            text-align: center;
            opacity: 0.9;
            margin-bottom: 24px;
            line-height: 1.5;
            font-weight: 400;
        }
        
        .game-card-players {
            background: rgba(0,0,0,0.25);
            border-radius: 20px; /* KLEINER */
            padding: 10px 16px; /* KLEINER */
            font-size: clamp(12px, 3vw, 14px);
            font-weight: 600;
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
        }
        
        /* Snap Indicators - Wie ursprünglich */
        .snap-indicators {
            display: flex;
            gap: 12px;
            margin-top: 15px;
            justify-content: center;
        }
        
        .snap-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: rgba(255,255,255,0.4);
            transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            cursor: pointer;
        }
        
        .snap-dot.active {
            background: white;
            transform: scale(1.3);
            box-shadow: 0 4px 12px rgba(255,255,255,0.4);
        }
        
        .snap-dot:hover {
            background: rgba(255,255,255,0.7);
            transform: scale(1.1);
        }

        /* MODAL - VERBESSERTER KONTRAST */
        .modal {
            background: rgba(28, 28, 30, 0.95) !important;
            color: white !important;
            border: 2px solid rgba(255,255,255,0.2) !important;
        }

        .modal-close {
            background: rgba(255,255,255,0.15) !important;
            color: white !important;
            border: 1px solid rgba(255,255,255,0.1) !important;
        }

        .modal-close:hover, .modal-close:active {
            background: rgba(255,255,255,0.25) !important;
        }

        .modal-title {
            color: white !important;
        }

        /* STATS - VERBESSERTER KONTRAST */
        .stat-item {
            background: rgba(44, 44, 48, 0.95) !important;
            color: white !important;
            border: 1px solid rgba(255,255,255,0.1) !important;
        }

        .stat-value {
            color: white !important;
        }

        .stat-label {
            color: rgba(255,255,255,0.8) !important;
        }

        /* HISTORY & ACHIEVEMENTS - VERBESSERTER KONTRAST */
        .history-item, 
        .achievement-item {
            background: rgba(44, 44, 48, 0.95) !important;
            border: 2px solid rgba(255,255,255,0.15) !important;
            color: white !important;
        }

        .achievement-item.unlocked {
            background: rgba(76, 175, 80, 0.3) !important;
            border-color: rgba(76, 175, 80, 0.5) !important;
        }
        .credits {
            position: fixed;
            bottom: clamp(15px, 4vw, 25px);
            left: clamp(90px, 20vw, 110px); /* Platz für Settings Icon links */
            right: clamp(90px, 20vw, 110px); /* Platz für Info Icon rechts */
            font-size: clamp(11px, 2.8vw, 13px);
            color: rgba(255,255,255,0.6);
            text-align: center;
            z-index: 10;
            font-weight: 500;
        }
        
        /* Back Button - VERBESSERTER KONTRAST */
        .back-button {
            position: absolute;
            top: clamp(20px, 5vw, 30px);
            left: clamp(20px, 5vw, 30px);
            background: rgba(28, 28, 30, 0.95);
            border: none;
            border-radius: 20px;
            color: white;
            font-size: clamp(18px, 4.5vw, 22px);
            width: clamp(48px, 12vw, 56px);
            height: clamp(48px, 12vw, 56px);
            cursor: pointer;
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            border: 1px solid rgba(255,255,255,0.2);
        }
        
        .back-button:active {
            transform: scale(0.9);
            background: rgba(48, 48, 52, 0.95);
        }
        
        /* Settings Container - VERBESSERTER KONTRAST */
        .settings-container {
            background: rgba(28, 28, 30, 0.95);
            border-radius: 28px;
            padding: clamp(28px, 6vw, 36px);
            margin: 20px 0;
            width: 100%;
            max-width: min(440px, 90vw);
            backdrop-filter: blur(15px);
            -webkit-backdrop-filter: blur(15px);
            border: 1px solid rgba(255,255,255,0.2);
            box-shadow: 0 16px 40px rgba(0,0,0,0.1);
        }
        
        .setting-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin: clamp(20px, 5vw, 28px) 0;
            color: white;
            flex-wrap: wrap;
            gap: 12px;
        }
        
        .setting-label {
            font-size: clamp(16px, 4vw, 18px);
            font-weight: 600;
            display: flex;
            align-items: center;
            flex: 1;
            min-width: 140px;
        }
        
        .setting-icon {
            font-size: clamp(22px, 5.5vw, 26px);
            margin-right: 16px;
            width: 32px;
            text-align: center;
        }
        
        /* NEW: Players row with names button */
        .players-controls {
            display: flex;
            align-items: center;
            gap: clamp(8px, 2vw, 12px);
        }
        
        .names-button {
            background: rgba(44, 44, 48, 0.95);
            border: none;
            border-radius: 12px;
            color: white;
            font-size: clamp(14px, 3.5vw, 16px);
            padding: clamp(8px, 2vw, 10px);
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            width: clamp(36px, 9vw, 40px);
            height: clamp(36px, 9vw, 40px);
            border: 1px solid rgba(255,255,255,0.15);
        }
        
        .names-button:active {
            background: rgba(58, 58, 64, 0.95);
            transform: scale(0.95);
        }

        /* NEW: Categories button - same style as names */
        .categories-button {
            background: rgba(44, 44, 48, 0.95);
            border: none;
            border-radius: 12px;
            color: white;
            font-size: clamp(14px, 3.5vw, 16px);
            padding: clamp(8px, 2vw, 10px) clamp(16px, 4vw, 20px);
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            border: 1px solid rgba(255,255,255,0.15);
            min-width: clamp(100px, 25vw, 120px);
        }
        
        .categories-button:active {
            background: rgba(58, 58, 64, 0.95);
            transform: scale(0.95);
        }
        
        /* Counter Controls - VERBESSERTER KONTRAST */
        .counter-controls {
            display: flex;
            align-items: center;
            gap: clamp(14px, 3.5vw, 20px);
        }
        
        .counter-btn {
            width: clamp(42px, 10vw, 48px);
            height: clamp(42px, 10vw, 48px);
            border-radius: 50%;
            background: rgba(44, 44, 48, 0.95);
            border: none;
            color: white;
            font-size: clamp(20px, 5vw, 24px);
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.15);
        }
        
        .counter-btn:active {
            transform: scale(0.9);
            background: rgba(58, 58, 64, 0.95);
        }
        
        .counter-value {
            font-size: clamp(18px, 4.5vw, 22px);
            font-weight: 700;
            min-width: clamp(32px, 8vw, 38px);
            text-align: center;
        }
        
        /* Toggle Switch - VERBESSERTER KONTRAST */
        .toggle-switch {
            width: clamp(56px, 14vw, 62px);
            height: clamp(32px, 8vw, 36px);
            background: rgba(44, 44, 48, 0.95);
            border-radius: 18px;
            position: relative;
            cursor: pointer;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.15);
        }
        
        .toggle-switch.active {
            background: #4CAF50;
            border: 1px solid rgba(76, 175, 80, 0.4);
        }
        
        .toggle-switch::after {
            content: '';
            position: absolute;
            width: clamp(28px, 7vw, 32px);
            height: clamp(28px, 7vw, 32px);
            border-radius: 50%;
            background: white;
            top: 50%;
            left: 2px;
            transform: translateY(-50%);
            transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }
        
        .toggle-switch.active::after {
            left: calc(100% - clamp(28px, 7vw, 32px) - 2px);
        }
        
        /* Buttons - VERBESSERTER KONTRAST */
        .button {
            background: rgba(44, 44, 48, 0.95) !important;
            border: none;
            border-radius: 24px;
            color: white !important;
            font-size: clamp(16px, 4.2vw, 20px);
            font-weight: 700;
            padding: clamp(18px, 4.5vw, 24px) clamp(32px, 8vw, 42px);
            margin: 10px;
            min-width: clamp(240px, 65vw, 320px);
            max-width: 90vw;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            backdrop-filter: blur(15px);
            -webkit-backdrop-filter: blur(15px);
            text-decoration: none;
            display: block;
            outline: none;
            -webkit-appearance: none;
            user-select: none;
            -webkit-user-select: none;
            position: relative;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
            z-index: 50;
            box-shadow: 0 8px 24px rgba(0,0,0,0.3);
            border: 1px solid rgba(255,255,255,0.15) !important;
        }
        
        .button:active, .button:hover {
            transform: scale(0.96);
            background: rgba(58, 58, 64, 0.95) !important;
            box-shadow: 0 12px 32px rgba(0,0,0,0.4);
        }
        
        /* IMPROVED: Next Button - WEITER NACH UNTEN FÜR ALLE BILDSCHIRMGRÖSSN */
        .next-button {
            background: rgba(44, 44, 48, 0.95) !important;
            opacity: 0 !important;
            pointer-events: none !important;
            transform: translateY(20px);
            transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            position: fixed !important;
            bottom: clamp(80px, 14vh, 120px) !important; /* WEITER NACH UNTEN */
            left: 50% !important;
            transform: translateX(-50%) translateY(20px) !important;
            z-index: 500 !important;
            min-height: clamp(54px, 12vh, 64px) !important;
            border: 1px solid rgba(255,255,255,0.15) !important;
        }
        
        .next-button.visible {
            opacity: 1 !important;
            pointer-events: auto !important;
            transform: translateX(-50%) translateY(0) !important;
        }
        
        /* Player Card */
        .player-card {
            background: linear-gradient(135deg, #ffb347 0%, #ff8c42 100%);
            border-radius: 28px;
            padding: clamp(28px, 7vw, 36px);
            margin: 20px 0;
            width: 100%;
            max-width: min(400px, 90vw);
            text-align: center;
            box-shadow: 0 16px 40px rgba(0,0,0,0.2);
            border: 3px solid rgba(255,255,255,0.3);
            transition: all 0.4s ease;
            position: relative;
            z-index: 10000;
        }
        
        .player-card.flipping {
            animation: cardFlip 0.6s ease-in-out;
        }
        
        @keyframes cardFlip {
            0% { transform: rotateY(0deg) scale(1); }
            50% { transform: rotateY(90deg) scale(0.95); }
            100% { transform: rotateY(0deg) scale(1); }
        }
        
        .player-card.lifted {
            transform: translateY(-20px);
            box-shadow: 0 28px 60px rgba(0,0,0,0.3);
        }
        
        .player-title {
            font-size: clamp(24px, 6vw, 32px);
            font-weight: 700;
            color: white;
            margin-bottom: 20px;
            text-shadow: 0 2px 8px rgba(0,0,0,0.3);
        }
        
        .player-emoji {
            font-size: clamp(56px, 14vw, 72px);
            margin: 20px 0;
            background: rgba(255,255,255,0.3);
            width: clamp(80px, 20vw, 100px);
            height: clamp(80px, 20vw, 100px);
            border-radius: 28px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 20px auto;
            backdrop-filter: blur(10px);
        }
        
        .reveal-button {
            background: rgba(255,255,255,0.25);
            border-radius: 20px;
            color: white;
            font-size: clamp(16px, 4vw, 18px);
            font-weight: 600;
            padding: clamp(16px, 4vw, 20px) clamp(20px, 5vw, 24px);
            width: 100%;
            cursor: pointer;
            transition: all 0.3s ease;
            border: none;
            outline: none;
            backdrop-filter: blur(10px);
        }
        
        .reveal-button:active {
            transform: scale(0.96);
            background: rgba(255,255,255,0.35);
        }
        
        /* IMPROVED: Revealed Content - Larger hints box */
        .revealed-content {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: rgba(0,0,0,0.95);
            border-radius: 28px;
            padding: clamp(24px, 6vw, 32px);
            margin-top: 20px;
            text-align: center;
            opacity: 0;
            transform: translateY(10px);
            transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            z-index: 999999;
            pointer-events: none;
            backdrop-filter: blur(20px);
            max-width: 100%;
            box-sizing: border-box;
            min-height: clamp(140px, 20vh, 180px);
        }
        
        .revealed-content.visible {
            opacity: 1;
            transform: translateY(0);
            pointer-events: auto;
        }
        
        .role-icon {
            width: clamp(52px, 13vw, 60px);
            height: clamp(52px, 13vw, 60px);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 16px;
            font-size: clamp(22px, 6vw, 28px);
            font-weight: bold;
            color: white;
        }
        
        .role-icon.impostor {
            background: #f44336;
        }
        
        .role-icon.normal {
            background: #4CAF50;
        }
        
        .role-text {
            font-size: clamp(18px, 4.5vw, 22px);
            font-weight: 600;
            color: white;
            margin-bottom: 16px;
        }
        
        .word-display {
            background: rgba(255,255,255,0.95);
            border-radius: 20px;
            padding: clamp(20px, 5vw, 28px);
            font-size: clamp(26px, 6.5vw, 32px);
            font-weight: 700;
            color: #333;
            backdrop-filter: blur(10px);
            margin-bottom: 8px;
        }
        
        /* IMPROVED: Larger hint display */
        .hint-display {
            background: rgba(255,255,255,0.95);
            border-radius: 20px;
            padding: clamp(18px, 4.5vw, 24px);
            font-size: clamp(18px, 4.5vw, 22px);
            color: #666;
            backdrop-filter: blur(10px);
            margin-bottom: 8px;
            min-height: clamp(60px, 12vh, 80px);
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        /* Names Management Modal - VERBESSERTER KONTRAST */
        .names-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 3000;
            opacity: 0;
            pointer-events: none;
            transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
        }
        
        .names-modal.visible {
            opacity: 1;
            pointer-events: auto;
        }
        
        .names-modal-content {
            background: rgba(28, 28, 30, 0.95);
            border-radius: 32px;
            padding: 32px;
            width: 92%;
            max-width: 480px;
            max-height: 85vh;
            overflow-y: auto;
            color: white;
            position: relative;
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 2px solid rgba(255,255,255,0.2);
            box-shadow: 0 32px 80px rgba(0,0,0,0.25);
            transform: scale(0.9) translateY(20px);
            transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }
        
        .names-modal.visible .names-modal-content {
            transform: scale(1) translateY(0);
        }
        
        .names-modal-close {
            position: absolute;
            top: 20px;
            right: 24px;
            background: rgba(255,255,255,0.15);
            border: none;
            color: white;
            font-size: 28px;
            cursor: pointer;
            width: 36px;
            height: 36px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: all 0.3s ease;
            border: 1px solid rgba(255,255,255,0.1);
        }
        
        .names-modal-close:hover, .names-modal-close:active {
            background: rgba(255,255,255,0.25);
            transform: scale(0.9);
        }
        
        .names-modal-title {
            font-size: clamp(26px, 6.5vw, 34px);
            font-weight: 700;
            margin-bottom: 24px;
            text-align: center;
            color: white;
        }
        
        .names-list {
            max-height: 60vh;
            overflow-y: auto;
            margin-bottom: 20px;
        }
        
        .name-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            background: rgba(255,255,255,0.15);
            border-radius: 16px;
            padding: 16px 20px;
            margin-bottom: 12px;
            color: white;
            transition: all 0.3s ease;
            cursor: pointer;
            border: 1px solid rgba(255,255,255,0.1);
        }
        
        .name-item:hover, .name-item:active {
            background: rgba(255,255,255,0.2);
            transform: scale(0.98);
        }
        
        .name-item.editing {
            background: rgba(255,255,255,0.25);
        }
        
        .name-input {
            background: transparent;
            border: none;
            color: white;
            font-size: clamp(16px, 4vw, 18px);
            font-weight: 600;
            outline: none;
            width: 100%;
            padding: 0;
        }
        
        .name-input::placeholder {
            color: rgba(255,255,255,0.5);
        }
        
        .name-display {
            font-size: clamp(16px, 4vw, 18px);
            font-weight: 600;
            flex: 1;
        }
        
        .name-number {
            background: rgba(255,255,255,0.2);
            border-radius: 12px;
            padding: 8px 12px;
            font-size: clamp(12px, 3vw, 14px);
            font-weight: 600;
            color: rgba(255,255,255,0.8);
        }

        /* NEW: Categories Modal - same style as names modal */
        .categories-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 3000;
            opacity: 0;
            pointer-events: none;
            transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
        }
        
        .categories-modal.visible {
            opacity: 1;
            pointer-events: auto;
        }
        
        .categories-modal-content {
            background: rgba(28, 28, 30, 0.95);
            border-radius: 32px;
            padding: 32px;
            width: 92%;
            max-width: 480px;
            max-height: 85vh;
            overflow-y: auto;
            color: white;
            position: relative;
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 2px solid rgba(255,255,255,0.2);
            box-shadow: 0 32px 80px rgba(0,0,0,0.25);
            transform: scale(0.9) translateY(20px);
            transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }
        
        .categories-modal.visible .categories-modal-content {
            transform: scale(1) translateY(0);
        }
        
        .categories-modal-close {
            position: absolute;
            top: 20px;
            right: 24px;
            background: rgba(255,255,255,0.15);
            border: none;
            color: white;
            font-size: 28px;
            cursor: pointer;
            width: 36px;
            height: 36px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: all 0.3s ease;
            border: 1px solid rgba(255,255,255,0.1);
        }
        
        .categories-modal-close:hover, .categories-modal-close:active {
            background: rgba(255,255,255,0.25);
            transform: scale(0.9);
        }
        
        .categories-modal-title {
            font-size: clamp(26px, 6.5vw, 34px);
            font-weight: 700;
            margin-bottom: 24px;
            text-align: center;
            color: white;
        }
        
        .categories-list {
            max-height: 60vh;
            overflow-y: auto;
            margin-bottom: 20px;
        }
        
        .category-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            background: rgba(255,255,255,0.15);
            border-radius: 16px;
            padding: 16px 20px;
            margin-bottom: 12px;
            color: white;
            transition: all 0.3s ease;
            cursor: pointer;
            border: 1px solid rgba(255,255,255,0.1);
        }
        
        .category-item:hover, .category-item:active {
            background: rgba(255,255,255,0.2);
            transform: scale(0.98);
        }
        
        .category-item.selected {
            background: rgba(76, 175, 80, 0.3);
            border-color: rgba(76, 175, 80, 0.5);
        }
        
        .category-display {
            font-size: clamp(16px, 4vw, 18px);
            font-weight: 600;
            flex: 1;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .category-emoji {
            font-size: clamp(20px, 5vw, 24px);
        }
        
        .category-count {
            background: rgba(255,255,255,0.2);
            border-radius: 12px;
            padding: 8px 12px;
            font-size: clamp(12px, 3vw, 14px);
            font-weight: 600;
            color: rgba(255,255,255,0.8);
        }
        
        /* Timer Display - VERBESSERTER KONTRAST */
        .timer-display {
            position: absolute;
            top: clamp(20px, 5vw, 30px);
            left: 50%;
            transform: translateX(-50%);
            background: rgba(28, 28, 30, 0.95);
            border-radius: 24px;
            padding: clamp(12px, 3vw, 14px) clamp(20px, 5vw, 24px);
            color: white;
            font-size: clamp(18px, 4.5vw, 22px);
            font-weight: 700;
            backdrop-filter: blur(15px);
            -webkit-backdrop-filter: blur(15px);
            border: 1px solid rgba(255,255,255,0.2);
        }
        
        /* Starter Text */
        .starter-text {
            font-size: clamp(28px, 7vw, 36px);
            font-weight: 700;
            color: white;
            text-align: center;
            margin: 28px 0;
            animation: pulse 2s infinite;
            transition: font-size 1s ease;
        }
        
        .starter-text.shrunk {
            font-size: clamp(20px, 5vw, 24px);
            animation: none;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.8; transform: scale(1.05); }
        }
        
        /* Goal Box - VERBESSERTER KONTRAST */
        .goal-box {
            background: rgba(28, 28, 30, 0.95);
            border-radius: 24px;
            padding: clamp(20px, 5vw, 24px);
            margin: 20px 0;
            width: 100%;
            max-width: min(400px, 90vw);
            text-align: left;
            backdrop-filter: blur(15px);
            -webkit-backdrop-filter: blur(15px);
            border: 1px solid rgba(255,255,255,0.2);
        }
        
        .goal-title {
            font-size: clamp(22px, 5.5vw, 26px);
            font-weight: 700;
            color: white;
            margin-bottom: 20px;
            text-align: center;
        }
        
        .goal-item {
            margin-bottom: 16px;
            color: white;
            line-height: 1.5;
            font-size: clamp(16px, 4vw, 18px);
        }
        
        .goal-emoji {
            font-size: clamp(22px, 5.5vw, 26px);
            margin-right: 14px;
        }
        
        /* Roles List */
        .roles-list {
            width: 100%;
            max-width: min(440px, 90vw);
            margin: 20px 0;
            max-height: 65vh;
            overflow-y: auto;
            -webkit-overflow-scrolling: touch;
        }
        
        .role-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: rgba(28, 28, 30, 0.95);
            border-radius: 20px;
            padding: clamp(16px, 4vw, 20px);
            margin: 12px 0;
            color: white;
            backdrop-filter: blur(15px);
            -webkit-backdrop-filter: blur(15px);
            border: 1px solid rgba(255,255,255,0.2);
        }
        
        .role-player {
            display: flex;
            align-items: center;
            font-size: clamp(16px, 4vw, 18px);
            font-weight: 600;
            flex: 1;
        }
        
        .role-result {
            font-size: clamp(14px, 3.5vw, 16px);
            text-align: right;
            margin-left: 14px;
        }
        
        /* EXPLOSIVE KONFETTI ANIMATION - RESPONSIVE */
        .confetti {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 10000;
            overflow: hidden;
        }
        
        .confetti-piece {
            position: absolute;
            font-size: clamp(12px, 3vw, 16px);
            transform-origin: center;
            left: 50%;
            top: 50%;
        }

        .confetti-piece.square {
            width: clamp(6px, 1.5vw, 8px);
            height: clamp(6px, 1.5vw, 8px);
            border-radius: 2px;
        }

        .confetti-piece.circle {
            width: clamp(4px, 1vw, 6px);
            height: clamp(4px, 1vw, 6px);
            border-radius: 50%;
        }

        .confetti-piece.triangle {
            width: 0;
            height: 0;
            border-left: clamp(3px, 0.75vw, 4px) solid transparent;
            border-right: clamp(3px, 0.75vw, 4px) solid transparent;
            border-bottom: clamp(6px, 1.5vw, 8px) solid;
        }

        .confetti-piece.emoji::before {
            content: attr(data-emoji);
            font-size: clamp(10px, 2.5vw, 14px);
        }
        
        @keyframes confetti-explode {
            0% {
                transform: translate(-50%, -50%) scale(0) rotate(0deg);
                opacity: 1;
            }
            15% {
                transform: translate(var(--dx), var(--dy)) scale(1) rotate(180deg);
                opacity: 1;
            }
            100% {
                transform: translate(calc(var(--dx) + var(--fx)), calc(var(--dy) + 100vh)) scale(0.5) rotate(720deg);
                opacity: 0;
            }
        }
        
        /* KOMPLETT NEUES MODAL DESIGN */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.6);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 2000;
            opacity: 0;
            pointer-events: none;
            transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
        }
        
        .modal-overlay.visible {
            opacity: 1;
            pointer-events: auto;
        }
        
        .modal {
            background: rgba(28, 28, 30, 0.95);
            border-radius: 32px;
            padding: 32px;
            width: 92%;
            max-width: 480px;
            max-height: 85vh;
            overflow-y: auto;
            color: white;
            position: relative;
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 2px solid rgba(255,255,255,0.2);
            box-shadow: 0 32px 80px rgba(0,0,0,0.25);
            transform: scale(0.9) translateY(20px);
            transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }
        
        .modal-overlay.visible .modal {
            transform: scale(1) translateY(0);
        }
        
        .modal-close {
            position: absolute;
            top: 20px;
            right: 24px;
            background: rgba(255,255,255,0.15);
            border: none;
            color: white;
            font-size: 28px;
            cursor: pointer;
            width: 36px;
            height: 36px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: all 0.3s ease;
            border: 1px solid rgba(255,255,255,0.1);
        }
        
        .modal-close:hover, .modal-close:active {
            background: rgba(255,255,255,0.25);
            transform: scale(0.9);
        }
        
        .modal-title {
            font-size: clamp(26px, 6.5vw, 34px);
            font-weight: 700;
            margin-bottom: 24px;
            text-align: center;
            color: white;
        }
        
        /* STATS GRID - ÜBERARBEITET */
        .stats-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 16px;
            margin-bottom: 24px;
        }
        
        .stat-item {
            background: rgba(44, 44, 48, 0.95);
            border-radius: 20px;
            padding: 20px;
            text-align: center;
            color: white;
            backdrop-filter: blur(10px);
            box-shadow: 0 8px 24px rgba(0,0,0,0.1);
            border: 1px solid rgba(255,255,255,0.1);
        }
        
        .stat-value {
            font-size: clamp(28px, 7vw, 36px);
            font-weight: 800;
            color: white;
        }
        
        .stat-label {
            font-size: clamp(12px, 3vw, 14px);
            opacity: 0.9;
            margin-top: 8px;
            font-weight: 500;
        }
        
        /* SHARE BUTTON - VERBESSERTER KONTRAST */
        .share-button {
            background: rgba(44, 44, 48, 0.95);
            border: none;
            border-radius: 16px;
            color: white;
            font-size: clamp(14px, 3.5vw, 16px);
            font-weight: 600;
            padding: 12px 20px;
            margin-top: 16px;
            width: 100%;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            border: 1px solid rgba(255,255,255,0.15);
        }
        
        .share-button:active {
            transform: scale(0.98);
            background: rgba(58, 58, 64, 0.95);
        }
        
        /* HISTORY UND ACHIEVEMENT ITEMS REDESIGN */
        .history-item, .achievement-item {
            background: rgba(44, 44, 48, 0.95);
            border-radius: 20px;
            padding: 20px;
            margin-bottom: 12px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border: 2px solid rgba(255,255,255,0.15);
            transition: all 0.3s ease;
        }
        
        .history-item:active, .achievement-item:active {
            transform: scale(0.98);
            background: rgba(58, 58, 64, 0.95);
        }
        
        .achievement-item.unlocked {
            background: rgba(76, 175, 80, 0.3);
            border-color: rgba(76, 175, 80, 0.5);
        }
        
        .achievement-icon {
            font-size: 28px;
            margin-right: 16px;
        }
        
        /* OPTIMIERTE SYMMETRIE UND ABSTÄNDE FÜR ALLE BILDSCHIRMGROSSN */
        @media screen and (max-height: 600px) {
            .screen {
                padding: 12px;
                justify-content: flex-start;
                padding-top: 20px;
            }
            
            .title {
                font-size: clamp(22px, 6vw, 32px);
                margin-bottom: 12px;
            }
            
            .settings-container, .player-card, .goal-box {
                margin: 10px 0;
                padding: 16px;
            }
            
            .setting-row {
                margin: clamp(16px, 4vw, 20px) 0;
            }
            
            .player-card + div {
                height: clamp(100px, 16vh, 140px) !important;
            }
            
            .next-button {
                bottom: clamp(60px, 12vh, 80px) !important; /* WEITER NACH UNTEN */
            }
            
            #instructionText {
                bottom: clamp(20px, 6vh, 30px) !important; /* WEITER NACH UNTEN */
                position: fixed !important;
                left: 50% !important;
                transform: translateX(-50%) !important;
                max-width: 90% !important;
                text-align: center !important;
                font-size: clamp(12px, 3vw, 14px) !important;
            }
            
            .settings-icon, .info-icon {
                bottom: clamp(15px, 4vw, 20px);
                width: clamp(40px, 10vw, 46px);
                height: clamp(40px, 10vw, 46px);
                font-size: clamp(16px, 4vw, 18px);
            }
            
            .settings-icon {
                left: clamp(12px, 3vw, 16px);
            }
            
            .info-icon {
                right: clamp(12px, 3vw, 16px);
            }
            
            .settings-menu {
                bottom: clamp(65px, 15vw, 75px);
                left: clamp(12px, 3vw, 16px);
                min-width: 180px;
                max-width: 200px;
            }
            
            .settings-menu-item {
                padding: 12px 16px;
                font-size: clamp(13px, 3.2vw, 15px);
            }
        }
        
        /* Very Small Screens - OPTIMIERTE SYMMETRIE */
        @media screen and (max-width: 280px) {
            .title {
                font-size: clamp(18px, 5.5vw, 24px);
            }
            
            .game-card {
                min-width: calc(100vw - 30px);
                max-width: calc(100vw - 30px);
                height: clamp(280px, 50vh, 350px);
                padding: 20px;
            }
            
            .game-card-emoji {
                font-size: clamp(40px, 12vw, 55px);
                width: clamp(70px, 18vw, 90px);
                height: clamp(70px, 18vw, 90px);
            }
            
            .game-card-title {
                font-size: clamp(16px, 4.5vw, 20px);
            }
            
            .game-card-desc {
                font-size: clamp(12px, 3.2vw, 14px);
            }
            
            .button {
                min-width: calc(100vw - 60px);
                padding: clamp(14px, 4vw, 18px) clamp(20px, 6vw, 28px);
                font-size: clamp(14px, 3.8vw, 16px);
            }
            
            .player-emoji {
                font-size: clamp(40px, 12vw, 56px);
                width: clamp(60px, 16vw, 80px);
                height: clamp(60px, 16vw, 80px);
            }
            
            .settings-icon, .info-icon {
                width: clamp(36px, 9vw, 42px);
                height: clamp(36px, 9vw, 42px);
                font-size: clamp(14px, 3.5vw, 16px);
            }
            
            .settings-icon::before, .info-icon::before {
                width: 14px;
                height: 14px;
            }
        }
        
        @media screen and (max-width: 320px) {
            .setting-row {
                flex-direction: column;
                align-items: stretch;
                gap: 8px;
            }
            
            .counter-controls {
                justify-content: center;
            }
            
            .button {
                min-width: 85%;
                margin: 8px auto;
            }
            
            .games-container {
                gap: 12px;
                padding: 0 12px;
            }
            
            .game-card {
                min-width: calc(100vw - 32px);
                max-width: calc(100vw - 32px);
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
                gap: 12px;
            }
            
            .player-card + div {
                height: clamp(80px, 14vh, 120px) !important;
            }
            
            .next-button {
                bottom: clamp(50px, 10vh, 70px) !important; /* WEITER NACH UNTEN */
                min-width: calc(100vw - 60px) !important;
            }
            
            #instructionText {
                bottom: clamp(15px, 4vh, 25px) !important; /* WEITER NACH UNTEN */
                position: fixed !important;
                left: 50% !important;
                transform: translateX(-50%) !important;
                max-width: 90% !important;
                font-size: clamp(11px, 2.8vw, 13px) !important;
                text-align: center !important;
                line-height: 1.3 !important;
            }
            
            .revealed-content {
                padding: clamp(12px, 3.5vw, 16px);
                margin-top: 6px;
            }
            
            .word-display, .hint-display {
                padding: clamp(8px, 2.5vw, 12px);
                font-size: clamp(16px, 4.5vw, 20px);
            }
            
            .credits {
                left: clamp(60px, 14vw, 70px);
                right: clamp(60px, 14vw, 70px);
                font-size: clamp(9px, 2.2vw, 11px);
            }
            
            .modal {
                width: 96%;
                padding: 20px;
                max-height: 90vh;
            }
            
            .modal-title {
                font-size: clamp(20px, 5.5vw, 26px);
            }
        }
        
        /* Landscape Orientation - VERBESSERTE SYMMETRIE */
        @media screen and (orientation: landscape) and (max-height: 500px) {
            .screen {
                flex-direction: row;
                flex-wrap: wrap;
                align-content: center;
                justify-content: center;
                padding: 14px;
            }
            
            .title {
                font-size: 30px;
                margin: 10px 0;
                width: 100%;
            }
            
            .settings-container, .player-card {
                max-width: 340px;
                margin: 10px;
            }
            
            /* Landscape-spezifische Anpassungen für Player Card */
            .player-card + div {
                height: 60px !important;
                width: 100%;
            }
            
            .next-button {
                bottom: clamp(40px, 10vh, 60px) !important; /* WEITER NACH UNTEN */
            }
            
            #instructionText {
                bottom: clamp(10px, 4vh, 20px) !important; /* WEITER NACH UNTEN */
            }
            
            .button {
                margin: 5px;
                padding: 14px 28px;
                min-width: 200px;
            }
            
            /* Icons im Landscape-Modus anpassen */
            .settings-icon, .info-icon {
                bottom: clamp(15px, 4vw, 20px);
                width: clamp(44px, 10vw, 48px);
                height: clamp(44px, 10vw, 48px);
            }
            
            .settings-icon {
                left: clamp(15px, 4vw, 20px);
            }
            
            .info-icon {
                right: clamp(15px, 4vw, 20px);
            }
            
            .settings-menu {
                bottom: clamp(65px, 15vw, 75px);
                left: clamp(15px, 4vw, 20px);
                max-height: 60vh;
                overflow-y: auto;
            }
        }
    </style>
</head>
<body>
    <!-- Settings Icon - Apple Style -->
    <button class="settings-icon" id="settingsIcon" onclick="toggleSettingsMenu()"></button>
    
    <!-- Info Icon - Symmetrisch rechts -->
    <button class="info-icon" id="infoIcon" onclick="showInfoModal()"></button>
    
    <!-- Settings Menu -->
    <div class="settings-menu" id="settingsMenu">
        <div class="settings-menu-item" onclick="showStatsModal()">
            📊 Statistiken
        </div>
        <div class="settings-menu-item" onclick="showHistoryModal()">
            📚 Spiel-Historie
        </div>
        <div class="settings-menu-item" onclick="showAchievementsModal()">
            🏆 Erfolge
        </div>
        <div class="settings-menu-item" onclick="showInstallModal()">
            📱 App installieren
        </div>
        <div class="settings-menu-item" onclick="toggleTheme()">
            🌙 Theme: <span id="themeStatus">Dark</span>
        </div>
        <div class="settings-menu-item" onclick="toggleSounds()">
            🔊 Sounds: <span id="soundStatus">An</span>
        </div>
        <div class="settings-menu-item" onclick="toggleVibration()">
            📳 Vibration: <span id="vibrationStatus">An</span>
        </div>
        <div class="settings-menu-item" onclick="showComingSoonModal()">
            🚀 Coming Soon
        </div>
        <div class="settings-menu-item version">
            💻 made by C at School
        </div>
    </div>

    <!-- Clean Screen Transition -->
    <div class="screen-transition" id="screenTransition"></div>

    <!-- Mode Select Screen -->
    <div id="modeSelectScreen" class="screen home-bg">
        <div class="header-container">
            <h1 class="title">Party-games<span class="title-suffix">.me</span></h1>
            <div class="controller-emoji">🎮</div>
        </div>
        
        <div class="games-container" id="gamesContainer">
            <div class="game-card impostor-card" onclick="showImpostorSettings()">
                <div class="game-card-emoji">🎭</div>
                <div class="game-card-title">
                    <div style="font-size: clamp(14px, 3.5vw, 18px); font-weight: 600; margin-bottom: 4px;">FINDET DEN</div>
                    <div style="font-size: clamp(28px, 7vw, 36px); font-weight: 800;">IMPOSTOR</div>
                </div>
                <div class="game-card-desc">Finde heraus, wer der Verräter in eurer Gruppe ist!</div>
                <div class="game-card-players">👥 3-20</div>
            </div>
            
            <div class="game-card coming-soon-card" onclick="handleEasterEggClick()">
                <div class="game-card-emoji">🎯</div>
                <div class="game-card-title">MEHR SPIELE</div>
                <div class="game-card-desc">Weitere Party-Spiele kommen bald!</div>
                <div class="game-card-players">Bald verfügbar</div>
            </div>
        </div>
        
        <!-- Snap Indicators -->
        <div class="snap-indicators">
            <div class="snap-dot active" id="dot1" onclick="scrollToCard(0)"></div>
            <div class="snap-dot" id="dot2" onclick="scrollToCard(1)"></div>
        </div>
    </div>

    <!-- Impostor Settings Screen -->
    <div id="impostorScreen" class="screen impostor-bg hidden">
        <button class="back-button" onclick="showModeSelect()">←</button>
        
        <h1 class="title" style="font-size: clamp(28px, 7vw, 36px); margin-bottom: 28px;">Impostor Game</h1>
        
        <div class="settings-container">
            <div class="setting-row">
                <div class="setting-label">
                    <span class="setting-icon">👥</span>
                    Spieler
                </div>
                <div class="players-controls">
                    <div class="counter-controls">
                        <button class="counter-btn" onclick="changePlayerCount(-1)">−</button>
                        <span class="counter-value" id="playersCount">4</span>
                        <button class="counter-btn" onclick="changePlayerCount(1)">+</button>
                    </div>
                    <button class="names-button" onclick="showNamesModal()" title="Namen bearbeiten">
                        ✏️
                    </button>
                </div>
            </div>
            
            <div class="setting-row">
                <div class="setting-label">
                    <span class="setting-icon">🎭</span>
                    Impostor
                </div>
                <div class="counter-controls">
                    <button class="counter-btn" onclick="changeImpostorCount(-1)">−</button>
                    <span class="counter-value" id="impostorsCount">1</span>
                    <button class="counter-btn" onclick="changeImpostorCount(1)">+</button>
                </div>
            </div>
            
            <div class="setting-row">
                <div class="setting-label">
                    <span class="setting-icon">⏱️</span>
                    Zeitlimit
                </div>
                <div class="toggle-switch" id="timerToggle" onclick="toggleTimer()"></div>
            </div>
            
            <div class="setting-row" id="timerMinutesRow" style="display: none;">
                <div class="setting-label">
                    <span class="setting-icon">🕐</span>
                    Minuten
                </div>
                <div class="counter-controls">
                    <button class="counter-btn" onclick="changeTimerMinutes(-1)">−</button>
                    <span class="counter-value" id="timerMinutesCount">2</span>
                    <button class="counter-btn" onclick="changeTimerMinutes(1)">+</button>
                </div>
            </div>
            
            <div class="setting-row">
                <div class="setting-label">
                    <span class="setting-icon">🏷️</span>
                    Kategorien
                </div>
                <button class="categories-button" id="categoryButton" onclick="showCategoriesModal()">
                    <span id="categoryEmoji">🎯</span>
                    <span id="categoryText">Alle</span>
                </button>
            </div>
            
            <div class="setting-row">
                <div class="setting-label">
                    <span class="setting-icon">💡</span>
                    Hinweise für Impostor
                </div>
                <div class="toggle-switch active" id="hintsToggle" onclick="toggleHints()"></div>
            </div>
        </div>
        
        <button class="button" onclick="startGame()">
            Spiel starten
        </button>
    </div>

    <!-- Game Playing Screen -->
    <div id="gameScreen" class="screen impostor-bg hidden">
        <button class="back-button" onclick="showImpostorSettings()">←</button>
        
        <h2 style="color: white; font-size: clamp(14px, 3.5vw, 18px); margin-bottom: 0; font-weight: 600; position: absolute; top: clamp(20px, 5vw, 30px); left: 50%; transform: translateX(-50%); z-index: 10;">Impostor Game</h2>
        
        <div class="player-card" id="playerCard">
            <div class="player-title" id="playerTitle">Spieler 1</div>
            <div class="player-emoji" id="playerEmoji">👤</div>
            
            <button class="reveal-button" 
                    onmousedown="showRole()" onmouseup="hideRole()" onmouseleave="hideRole()"
                    ontouchstart="showRole()" ontouchend="hideRole()">
                <div style="margin-bottom: 8px;">↑</div>
                Karte aufdecken
            </button>
            
            <div class="revealed-content" id="revealedContent">
                <div class="role-icon" id="roleIcon">✓</div>
                <div class="role-text" id="roleText"></div>
                <div id="wordOrHint"></div>
            </div>
        </div>
        
        <div style="height: clamp(100px, 16vh, 140px);"></div> <!-- OPTIMIERTER RESPONSIVE SPACER -->
        
        <button class="button next-button" onclick="handleNextPlayer()" id="nextButton">
            Weitergeben
        </button>
        
        <p id="instructionText" style="color: rgba(255,255,255,0.8); font-size: clamp(14px, 3.5vw, 16px); text-align: center; margin-top: 14px; transition: all 0.3s ease; opacity: 1; visibility: visible; position: fixed; bottom: clamp(30px, 8vh, 50px); left: 50%; transform: translateX(-50%); max-width: 90%; line-height: 1.4;">
            Ziehe deine Karte nach oben, um das Wort zu sehen. Achte darauf, dass niemand es sieht.
        </p>
    </div>

    <!-- Game Started Screen -->
    <div id="gameStartedScreen" class="screen impostor-bg hidden">
        <button class="back-button" onclick="showImpostorSettings()">←</button>
        
        <div id="timerDisplay" class="timer-display hidden">5:00</div>
        
        <div style="text-align: center;">
            <div style="font-size: clamp(80px, 20vw, 100px); margin-bottom: 28px;">🎭</div>
            <h1 class="title" style="font-size: clamp(32px, 8vw, 40px); margin-bottom: 20px;">Spiel läuft!</h1>
            <div class="starter-text" id="starterText">Spieler 1 beginnt</div>
        </div>
        
        <div class="goal-box">
            <div class="goal-title">Ziel:</div>
            <div class="goal-item">
                <span class="goal-emoji">👥</span>
                <strong>Normale Spieler:</strong><br>Findet den Impostor!
            </div>
            <div class="goal-item">
                <span class="goal-emoji">🎭</span>
                <strong>Impostor:</strong><br>Erratet das Wort!
            </div>
        </div>
        
        <div style="display: flex; flex-wrap: wrap; justify-content: center; gap: 14px; margin-top: 28px;">
            <button class="button" onclick="showRoles()">
                Rollen aufdecken
            </button>
            <button class="button" onclick="showImpostorSettings()">
                Neues Spiel
            </button>
        </div>
    </div>

    <!-- End Screen -->
    <div id="endScreen" class="screen impostor-bg hidden">
        <button class="back-button" onclick="showGameStarted()">←</button>
        
        <h1 class="title" style="font-size: clamp(24px, 6vw, 32px); margin-bottom: 28px;">Rollen aufdecken</h1>
        
        <div class="roles-list" id="rolesList">
            <!-- Dynamically populated -->
        </div>
        
        <button class="button" onclick="showImpostorSettings()">
            Neues Spiel
        </button>
    </div>

    <!-- Names Management Modal -->
    <div class="names-modal" id="namesModal">
        <div class="names-modal-content">
            <button class="names-modal-close" onclick="closeNamesModal()">×</button>
            <h2 class="names-modal-title">Spieler Namen</h2>
            <div class="names-list" id="namesList">
                <!-- Dynamically populated -->
            </div>
        </div>
    </div>

    <!-- Categories Management Modal -->
    <div class="categories-modal" id="categoriesModal">
        <div class="categories-modal-content">
            <button class="categories-modal-close" onclick="closeCategoriesModal()">×</button>
            <h2 class="categories-modal-title">Kategorien auswählen</h2>
            <div class="categories-list" id="categoriesList">
                <!-- Dynamically populated -->
            </div>
        </div>
    </div>

    <!-- Modal Overlay -->
    <div class="modal-overlay" id="modalOverlay">
        <div class="modal" id="modalContent">
            <button class="modal-close" onclick="closeModal()">×</button>
            <div id="modalBody"></div>
        </div>
    </div>

    <!-- Confetti Container -->
    <div class="confetti" id="confetti"></div>

    <script>
        // App Version
        const APP_VERSION = '1.3.0';

        // Game State
        let gameState = {
            totalPlayers: 4,
            impostors: 1,
            timerEnabled: false,
            timerMinutes: 2,
            hintsEnabled: true,
            selectedCategories: ['alle'], // Changed to array for multiple categories
            currentPlayer: 1,
            gameWord: '',
            gameHint: '',
            impostorPlayers: [],
            playerEmojis: [],
            playerNames: [], // NEW: Player names array
            startingPlayer: null, // Will be set randomly later
            timer: null,
            timeLeft: 0,
            gameStartTime: null,
            roundDuration: 0,
            hasRevealed: false // NEW: Track if player has revealed their card
        };

        // Settings
        let settings = {
            soundsEnabled: true,
            vibrationEnabled: true,
            lightTheme: false
        };

        // Stats and Achievements - OHNE IMPOSTOR TRACKING
        let playerStats = {
            gamesPlayed: 0,
            fastestGame: null,
            longestGame: null,
            totalPlayTime: 0
        };
        
        let gameHistory = [];
        let achievements = {};

        // Easter Egg Variables
        let easterEggClicks = 0;
        let easterEggTimer = null;

        // EXPANDED Word categories with new categories from the image
        const WORD_CATEGORIES = {
            // 🌍 Rund um die Welt
            travel: [
                { word: "Eiffelturm", hint: "Paris" },
                { word: "Big Ben", hint: "London" },
                { word: "Kolosseum", hint: "Rom" },
                { word: "Pyramiden", hint: "Ägypten" },
                { word: "Taj Mahal", hint: "Indien" },
                { word: "Machu Picchu", hint: "Peru" },
                { word: "Neuschwanstein", hint: "Bayern" },
                { word: "Sagrada Familia", hint: "Barcelona" },
                { word: "Mount Rushmore", hint: "Amerika" },
                { word: "Brandenburger Tor", hint: "Berlin" },
                { word: "Statue of Liberty", hint: "New York" },
                { word: "Stonehenge", hint: "England" },
                { word: "Gondel", hint: "Venedig" },
                { word: "Safari", hint: "Afrika" },
                { word: "Sushi", hint: "Japan" },
                { word: "Oktoberfest", hint: "München" },
                { word: "Tulpen", hint: "Holland" },
                { word: "Tango", hint: "Argentinien" },
                { word: "Backpacking", hint: "Reisen" },
                { word: "Flughafen", hint: "Terminal" }
            ],

            // 🎬 Unterhaltung
            entertainment: [
                { word: "Netflix", hint: "Streaming" },
                { word: "Popcorn", hint: "Kino" },
                { word: "Blockbuster", hint: "Erfolg" },
                { word: "Oscar", hint: "Preis" },
                { word: "Cliffhanger", hint: "Spannung" },
                { word: "Soundtrack", hint: "Musik" },
                { word: "Plot Twist", hint: "Wendung" },
                { word: "Spoiler", hint: "Verrat" },
                { word: "Binge-watching", hint: "Marathon" },
                { word: "Red Carpet", hint: "Premiere" },
                { word: "Standing Ovation", hint: "Applaus" },
                { word: "Box Office", hint: "Kasse" },
                { word: "Behind the Scenes", hint: "Kulissen" },
                { word: "Director's Cut", hint: "Version" },
                { word: "Cameo", hint: "Auftritt" },
                { word: "Easter Egg", hint: "Versteckt" },
                { word: "Trailer", hint: "Vorschau" },
                { word: "Sequel", hint: "Fortsetzung" },
                { word: "Remake", hint: "Neuauflage" },
                { word: "Premiere", hint: "Erstaufführung" }
            ],

            // 🏠 Alltag  
            everyday: [
                { word: "Morgenmuffel", hint: "Müde" },
                { word: "Kaffeesucht", hint: "Abhängig" },
                { word: "Wecker", hint: "Aufstehen" },
                { word: "Pendeln", hint: "Arbeitsweg" },
                { word: "Feierabend", hint: "Entspannung" },
                { word: "Hausputz", hint: "Sauber" },
                { word: "Einkaufsliste", hint: "Vergessen" },
                { word: "Stau", hint: "Warten" },
                { word: "Parkplatzsuche", hint: "Stress" },
                { word: "WG-Leben", hint: "Teilen" },
                { word: "Abwasch", hint: "Spülen" },
                { word: "Nachbar", hint: "Nebenan" },
                { word: "Paketbote", hint: "Lieferung" },
                { word: "Warteschlange", hint: "Geduld" },
                { word: "Hausschlüssel", hint: "Vergessen" },
                { word: "Mülltonnen", hint: "Rausräumen" },
                { word: "Mittagspause", hint: "Erholung" },
                { word: "Wäsche", hint: "Waschen" },
                { word: "Supermarkt", hint: "Einkaufen" },
                { word: "Mitbewohner", hint: "Zusammenleben" }
            ],

            // 🐾 Tiere & Natur
            animals: [
                { word: "Flamingo", hint: "Rosa" },
                { word: "Pinguin", hint: "Watschelt" },
                { word: "Koala", hint: "Australisch" },
                { word: "Giraffe", hint: "Hals" },
                { word: "Delfin", hint: "Intelligent" },
                { word: "Faultier", hint: "Langsam" },
                { word: "Chamäleon", hint: "Wechselt" },
                { word: "Känguru", hint: "Hüpft" },
                { word: "Oktopus", hint: "Acht" },
                { word: "Seepferdchen", hint: "Maritim" },
                { word: "Erdmännchen", hint: "Wacht" },
                { word: "Alpaka", hint: "Flauschig" },
                { word: "Elefant", hint: "Rüssel" },
                { word: "Tiger", hint: "Gestreift" },
                { word: "Eule", hint: "Nachts" },
                { word: "Kolibri", hint: "Winzig" },
                { word: "Regenwurm", hint: "Boden" },
                { word: "Spinne", hint: "Netz" },
                { word: "Biene", hint: "Honig" },
                { word: "Schmetterling", hint: "Verwandlung" },
                { word: "Igel", hint: "Stachelig" },
                { word: "Eichhörnchen", hint: "Nüsse" },
                { word: "Waschbär", hint: "Maskiert" },
                { word: "Biber", hint: "Damm" },
                { word: "Lama", hint: "Spuckt" }
            ],

            // ⚽ Sport & Freizeit
            sports: [
                { word: "Overtime", hint: "Verlängerung" },
                { word: "Fair Play", hint: "Anstand" },
                { word: "Weltrekord", hint: "Bestzeit" },
                { word: "Mannschaftssport", hint: "Gemeinsam" },
                { word: "Einzelkämpfer", hint: "Solo" },
                { word: "Heimvorteil", hint: "Zuhause" },
                { word: "Underdog", hint: "Außenseiter" },
                { word: "Derby", hint: "Rivalität" },
                { word: "Playoffs", hint: "Entscheidung" },
                { word: "Meisterschaft", hint: "Titel" },
                { word: "Olympia", hint: "Ringe" },
                { word: "Doping", hint: "Betrug" },
                { word: "Schiedsrichter", hint: "Pfeife" },
                { word: "Fangesang", hint: "Supporters" },
                { word: "Vereinswechsel", hint: "Transfer" },
                { word: "Verletzungspause", hint: "Auszeit" },
                { word: "Comeback", hint: "Rückkehr" },
                { word: "Rookie", hint: "Neuling" },
                { word: "Veteran", hint: "Erfahren" },
                { word: "Sportgeist", hint: "Fairness" }
            ],

            // 📚 Wissen & Schule
            education: [
                { word: "Klassenarbeit", hint: "Stress" },
                { word: "Pausenhof", hint: "Pause" },
                { word: "Schulbrot", hint: "Verpflegung" },
                { word: "Hausaufgaben", hint: "Vergessen" },
                { word: "Lehrbuch", hint: "Schwer" },
                { word: "Schulranzen", hint: "Rücken" },
                { word: "Klassenkamerad", hint: "Freund" },
                { word: "Vertretungslehrer", hint: "Überraschung" },
                { word: "Zeugnis", hint: "Noten" },
                { word: "Abitur", hint: "Abschluss" },
                { word: "Studienbeginn", hint: "Universität" },
                { word: "Vorlesung", hint: "Hören" },
                { word: "Klausur", hint: "Prüfung" },
                { word: "Semester", hint: "Halbjahr" },
                { word: "Bachelor", hint: "Abschluss" },
                { word: "Praktikum", hint: "Erfahrung" },
                { word: "Bibliothek", hint: "Bücher" },
                { word: "Mensaessen", hint: "Günstig" },
                { word: "Campus", hint: "Gelände" },
                { word: "Diplomarbeit", hint: "Thesis" }
            ],

            // 🎉 Feste & Feiern
            celebrations: [
                { word: "Geburtstagstorte", hint: "Kerzen" },
                { word: "Konfetti", hint: "Bunt" },
                { word: "Überraschungsparty", hint: "Geheim" },
                { word: "Silvesterfeuer", hint: "Neujahr" },
                { word: "Weihnachtsmarkt", hint: "Glühwein" },
                { word: "Ostereiersuche", hint: "Versteckt" },
                { word: "Karnevalsumzug", hint: "Kostüme" },
                { word: "Hochzeitstorte", hint: "Süß" },
                { word: "Jubiläum", hint: "Jahrestag" },
                { word: "Familientreffen", hint: "Verwandtschaft" },
                { word: "Schulabschluss", hint: "Zeugnis" },
                { word: "Einschulung", hint: "Schultüte" },
                { word: "Junggesellenabschied", hint: "Letztes Mal" },
                { word: "Taufe", hint: "Wasser" },
                { word: "Kommunion", hint: "Kirche" },
                { word: "Firmenfeier", hint: "Kollegen" },
                { word: "Abschlussball", hint: "Elegant" },
                { word: "Gartenparty", hint: "Draußen" },
                { word: "Grillabend", hint: "Würstchen" },
                { word: "Geburtstagsständchen", hint: "Singen" }
            ],

            // 🇩🇪 Deutsche Begriffe
            german: [
                { word: "Verschlimmbessern", hint: "Schlimmer" },
                { word: "Fernweh", hint: "Sehnsucht" },
                { word: "Gemütlichkeit", hint: "Wohlfühlen" },
                { word: "Schadenfreude", hint: "Bosheit" },
                { word: "Wanderlust", hint: "Reisen" },
                { word: "Zeitgeist", hint: "Epoche" },
                { word: "Doppelgänger", hint: "Zwilling" },
                { word: "Kindergarten", hint: "Spielen" },
                { word: "Gesundheit", hint: "Niesen" },
                { word: "Weltschmerz", hint: "Traurigkeit" },
                { word: "Fingerspitzengefühl", hint: "Feinfühlig" },
                { word: "Ohrwurm", hint: "Melodie" },
                { word: "Kopfkino", hint: "Vorstellung" },
                { word: "Fremdschämen", hint: "Peinlich" },
                { word: "Verschlimmbessern", hint: "Kaputt" },
                { word: "Erklärungsnot", hint: "Rechtfertigung" },
                { word: "Stehaufmännchen", hint: "Widerstand" },
                { word: "Backpfeifengesicht", hint: "Unsympathisch" },
                { word: "Kuddelmuddel", hint: "Chaos" },
                { word: "Torschlusspanik", hint: "Angst" }
            ],

            // ⭐ Stars & Promis
            celebrities: [
                { word: "Paparazzi", hint: "Fotografen" },
                { word: "Roter Teppich", hint: "Glamour" },
                { word: "Autogramm", hint: "Unterschrift" },
                { word: "Fanclub", hint: "Verehrung" },
                { word: "Skandal", hint: "Aufregung" },
                { word: "Comeback", hint: "Rückkehr" },
                { word: "Plattenvertrag", hint: "Musik" },
                { word: "Welttournee", hint: "Konzerte" },
                { word: "Box Office", hint: "Kino" },
                { word: "Casting", hint: "Auswahl" },
                { word: "Bodyguard", hint: "Schutz" },
                { word: "Privatsphäre", hint: "Geheim" },
                { word: "Charity", hint: "Spenden" },
                { word: "Shitstorm", hint: "Kritik" },
                { word: "Influencer", hint: "Einfluss" },
                { word: "Viral", hint: "Verbreitung" },
                { word: "Trending", hint: "Aktuell" },
                { word: "Shitstorm", hint: "Empörung" },
                { word: "Award Show", hint: "Preisverleihung" },
                { word: "Lifestyle", hint: "Lebensart" }
            ],

            // Legacy categories with more words
            food: [
                { word: "Sushi", hint: "Japanisch" },
                { word: "Croissant", hint: "Französisch" },
                { word: "Tacos", hint: "Mexikanisch" },
                { word: "Pasta", hint: "Al dente" },
                { word: "Curry", hint: "Scharf" },
                { word: "Döner", hint: "Türkisch" },
                { word: "Ramen", hint: "Nudeln" },
                { word: "Burger", hint: "Amerikanisch" },
                { word: "Spaghetti", hint: "Lang" },
                { word: "Popcorn", hint: "Knallt" },
                { word: "Wasabi", hint: "Brennt" },
                { word: "Mozzarella", hint: "Cremig" },
                { word: "Pizza", hint: "Italienisch" },
                { word: "Bratwurst", hint: "Deutsch" },
                { word: "Kimchi", hint: "Koreanisch" },
                { word: "Bolognese", hint: "Soße" },
                { word: "Tiramisu", hint: "Dessert" },
                { word: "Paella", hint: "Spanisch" },
                { word: "Guacamole", hint: "Avocado" },
                { word: "Baguette", hint: "Stange" },
                { word: "Churros", hint: "Süß" },
                { word: "Gazpacho", hint: "Kalt" },
                { word: "Maultaschen", hint: "Schwäbisch" },
                { word: "Schnitzel", hint: "Paniert" },
                { word: "Kaiserschmarren", hint: "Österreich" }
            ],
            
            objects: [
                { word: "Regenschirm", hint: "Schützt" },
                { word: "AirPods", hint: "Musik" },
                { word: "Skateboard", hint: "Rollt" },
                { word: "Fernbedienung", hint: "TV" },
                { word: "Sonnenbrille", hint: "Cool" },
                { word: "Rucksack", hint: "Trägt" },
                { word: "Wasserflasche", hint: "Durst" },
                { word: "Powerbank", hint: "Strom" },
                { word: "Laptop", hint: "Aufklappen" },
                { word: "Bluetooth-Box", hint: "Drahtlos" },
                { word: "Smartwatch", hint: "Handgelenk" },
                { word: "Gaming-Stuhl", hint: "Zocken" },
                { word: "Kamera", hint: "Aufnahme" },
                { word: "Schreibtisch", hint: "Arbeiten" },
                { word: "Kühlschrank", hint: "Abkühlen" },
                { word: "Hoodie", hint: "Kapuze" },
                { word: "Monitor", hint: "Bild" },
                { word: "Spiegel", hint: "Reflex" },
                { word: "Timer", hint: "Zeit" },
                { word: "Snackautomat", hint: "Klemmt" },
                { word: "Escape Room", hint: "Rätsel" },
                { word: "Smartphone", hint: "Immer dabei" },
                { word: "Kopfhörer", hint: "Privat hören" },
                { word: "Tablet", hint: "Touchscreen" },
                { word: "Drohne", hint: "Fliegt" }
            ]
        };

        // Category metadata - emoji and names
        const CATEGORY_INFO = {
            alle: { emoji: "🎯", name: "Alle Kategorien", count: 0 },
            travel: { emoji: "🌍", name: "Rund um die Welt", count: 20 },
            entertainment: { emoji: "🎬", name: "Unterhaltung", count: 20 },
            everyday: { emoji: "🏠", name: "Alltag", count: 20 },
            animals: { emoji: "🐾", name: "Tiere & Natur", count: 25 },
            sports: { emoji: "⚽", name: "Sport & Freizeit", count: 20 },
            education: { emoji: "📚", name: "Wissen & Schule", count: 20 },
            celebrations: { emoji: "🎉", name: "Feste & Feiern", count: 20 },
            german: { emoji: "🇩🇪", name: "Deutsche Begriffe", count: 20 },
            celebrities: { emoji: "⭐", name: "Stars & Promis", count: 20 },
            food: { emoji: "🍕", name: "Essen & Trinken", count: 25 },
            objects: { emoji: "📱", name: "Objekte & Technik", count: 25 }
        };

        // Calculate total count for "alle"
        CATEGORY_INFO.alle.count = Object.keys(WORD_CATEGORIES).reduce((total, key) => {
            if (key !== 'alle') {
                return total + WORD_CATEGORIES[key].length;
            }
            return total;
        }, 0);

        const coolEmojis = ['😎', '🤩', '🔥', '⚡', '🎯', '💀', '💎', '👾', '🪼', '🎊', '🎉', '🦄', '🐉', '👑', '🏆'];

        // Achievement definitions - OHNE IMPOSTOR BEZUG + EASTER EGG
        const ACHIEVEMENTS = {
            firstGame: { name: "Erstes Spiel", description: "Spiele dein erstes Spiel", icon: "🎮" },
            veteran: { name: "Veteran", description: "Spiele 25 Spiele", icon: "🏅" },
            speedRunner: { name: "Speedrunner", description: "Spiele unter 30 Sekunden", icon: "⚡" },
            marathon: { name: "Marathon", description: "Spiele über 10 Minuten", icon: "🏃" },
            social: { name: "Gesellig", description: "Spiele mit 10+ Personen", icon: "👥" },
            dedicated: { name: "Hingabe", description: "Spiele 100 Spiele", icon: "💯" },
            explorer: { name: "Entdecker", description: "Spiele alle Kategorien", icon: "🗺️" },
            curious: { name: "Neugierig", description: "Finde das Easter Egg", icon: "🕵️" }
        };

        // Audio Context for Sound Effects
        let audioContext;

        // Initialize player names array
        function initializePlayerNames() {
            gameState.playerNames = [];
            for (let i = 1; i <= gameState.totalPlayers; i++) {
                gameState.playerNames.push(`Spieler ${i}`);
            }
        }

        // Names Management Functions
        function showNamesModal() {
            // Ensure we have enough names for current player count
            while (gameState.playerNames.length < gameState.totalPlayers) {
                gameState.playerNames.push(`Spieler ${gameState.playerNames.length + 1}`);
            }
            
            updateNamesDisplay();
            document.getElementById('namesModal').classList.add('visible');
            playSound('tap');
        }

        function closeNamesModal() {
            document.getElementById('namesModal').classList.remove('visible');
            playSound('tap');
        }

        function updateNamesDisplay() {
            const namesList = document.getElementById('namesList');
            namesList.innerHTML = '';
            
            for (let i = 0; i < gameState.totalPlayers; i++) {
                const nameItem = document.createElement('div');
                nameItem.className = 'name-item';
                nameItem.onclick = () => editPlayerName(i);
                
                nameItem.innerHTML = `
                    <div class="name-display" id="nameDisplay${i}">${gameState.playerNames[i] || `Spieler ${i + 1}`}</div>
                    <div class="name-number">${i + 1}</div>
                `;
                
                namesList.appendChild(nameItem);
            }
        }

        function editPlayerName(playerIndex) {
            const nameItem = document.querySelector(`.name-item:nth-child(${playerIndex + 1})`);
            const nameDisplay = document.getElementById(`nameDisplay${playerIndex}`);
            
            nameItem.classList.add('editing');
            
            const currentName = gameState.playerNames[playerIndex] || `Spieler ${playerIndex + 1}`;
            
            nameDisplay.innerHTML = `<input type="text" class="name-input" id="nameInput${playerIndex}" value="${currentName}" maxlength="20">`;
            
            const input = document.getElementById(`nameInput${playerIndex}`);
            input.focus();
            input.select();
            
            const saveEdit = () => {
                const newName = input.value.trim() || `Spieler ${playerIndex + 1}`;
                gameState.playerNames[playerIndex] = newName;
                nameDisplay.textContent = newName;
                nameItem.classList.remove('editing');
                playSound('tap');
            };
            
            input.addEventListener('blur', saveEdit);
            input.addEventListener('keydown', (e) => {
                if (e.key === 'Enter') {
                    e.preventDefault();
                    saveEdit();
                }
            });
        }

        // NEW: Categories Management Functions
        function showCategoriesModal() {
            updateCategoriesDisplay();
            document.getElementById('categoriesModal').classList.add('visible');
            playSound('tap');
        }

        function closeCategoriesModal() {
            document.getElementById('categoriesModal').classList.remove('visible');
            updateCategoryButton();
            playSound('tap');
        }

        function updateCategoriesDisplay() {
            const categoriesList = document.getElementById('categoriesList');
            categoriesList.innerHTML = '';
            
            Object.keys(CATEGORY_INFO).forEach(categoryKey => {
                const category = CATEGORY_INFO[categoryKey];
                const isSelected = gameState.selectedCategories.includes(categoryKey);
                
                const categoryItem = document.createElement('div');
                categoryItem.className = `category-item ${isSelected ? 'selected' : ''}`;
                categoryItem.onclick = () => toggleCategory(categoryKey);
                
                categoryItem.innerHTML = `
                    <div class="category-display">
                        <span class="category-emoji">${category.emoji}</span>
                        <span>${category.name}</span>
                    </div>
                    <div class="category-count">${category.count}</div>
                `;
                
                categoriesList.appendChild(categoryItem);
            });
        }

        function toggleCategory(categoryKey) {
            if (categoryKey === 'alle') {
                // If "alle" is selected, select only "alle"
                gameState.selectedCategories = ['alle'];
            } else {
                // Remove "alle" if other categories are selected
                if (gameState.selectedCategories.includes('alle')) {
                    gameState.selectedCategories = [];
                }
                
                // Toggle the category
                const index = gameState.selectedCategories.indexOf(categoryKey);
                if (index > -1) {
                    gameState.selectedCategories.splice(index, 1);
                } else {
                    gameState.selectedCategories.push(categoryKey);
                }
                
                // If no categories selected, select "alle"
                if (gameState.selectedCategories.length === 0) {
                    gameState.selectedCategories = ['alle'];
                }
            }
            
            updateCategoriesDisplay();
            playSound('tap');
        }

        function updateCategoryButton() {
            const categoryButton = document.getElementById('categoryButton');
            const categoryEmoji = document.getElementById('categoryEmoji');
            const categoryText = document.getElementById('categoryText');
            
            if (gameState.selectedCategories.includes('alle') || gameState.selectedCategories.length === 0) {
                categoryEmoji.textContent = CATEGORY_INFO.alle.emoji;
                categoryText.textContent = CATEGORY_INFO.alle.name;
            } else if (gameState.selectedCategories.length === 1) {
                const category = CATEGORY_INFO[gameState.selectedCategories[0]];
                categoryEmoji.textContent = category.emoji;
                categoryText.textContent = category.name;
            } else {
                categoryEmoji.textContent = '🎯';
                categoryText.textContent = `${gameState.selectedCategories.length} Kategorien`;
            }
        }

        // Easter Egg Function
        function handleEasterEggClick() {
            easterEggClicks++;
            playSound('tap'); // Sound bei jedem Klick
            
            // Reset timer on each click
            if (easterEggTimer) {
                clearTimeout(easterEggTimer);
            }
            
            // Set timer to reset clicks after 3 seconds of inactivity
            easterEggTimer = setTimeout(() => {
                easterEggClicks = 0;
            }, 3000);
            
            // Check if enough clicks (5 clicks in 3 seconds)
            if (easterEggClicks >= 5) {
                easterEggClicks = 0;
                clearTimeout(easterEggTimer);
                
                // Unlock secret achievement
                if (!achievements.curious) {
                    achievements.curious = true;
                    showAchievementNotification([ACHIEVEMENTS.curious]);
                }
                
                // Show coming soon modal after a short delay
                setTimeout(() => {
                    showComingSoonModal();
                }, 1000);
                
                return;
            }
            
            // Visual feedback for clicks
            const card = event.target.closest('.coming-soon-card');
            if (card) {
                card.style.transform = 'scale(0.98)';
                setTimeout(() => {
                    card.style.transform = 'scale(1)';
                }, 100);
                
                // Subtle vibration
                vibrate([20]);
            }
        }
        
        // Sound Effects - ÜBERARBEITET
        function playSound(type) {
            if (!settings.soundsEnabled) return;
            
            try {
                if (!audioContext) {
                    audioContext = new (window.AudioContext || window.webkitAudioContext)();
                }
                
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();
                
                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);
                
                switch(type) {
                    case 'card-flip':
                        // Modernerer, sanfterer Flip-Sound
                        oscillator.frequency.setValueAtTime(600, audioContext.currentTime);
                        oscillator.frequency.exponentialRampToValueAtTime(300, audioContext.currentTime + 0.15);
                        gainNode.gain.setValueAtTime(0.08, audioContext.currentTime);
                        gainNode.gain.exponentialRampToValueAtTime(0.001, audioContext.currentTime + 0.15);
                        oscillator.start(audioContext.currentTime);
                        oscillator.stop(audioContext.currentTime + 0.15);
                        break;
                        
                    case 'success':
                        // Triumphaler Success-Sound
                        oscillator.frequency.setValueAtTime(440, audioContext.currentTime);
                        oscillator.frequency.setValueAtTime(554, audioContext.currentTime + 0.1);
                        oscillator.frequency.setValueAtTime(659, audioContext.currentTime + 0.2);
                        oscillator.frequency.setValueAtTime(880, audioContext.currentTime + 0.3);
                        gainNode.gain.setValueAtTime(0.12, audioContext.currentTime);
                        gainNode.gain.exponentialRampToValueAtTime(0.001, audioContext.currentTime + 0.4);
                        oscillator.start(audioContext.currentTime);
                        oscillator.stop(audioContext.currentTime + 0.4);
                        break;
                        
                    case 'shuffle':
                        // Rhythmischer Shuffle-Sound
                        for(let i = 0; i < 4; i++) {
                            const osc = audioContext.createOscillator();
                            const gain = audioContext.createGain();
                            osc.connect(gain);
                            gain.connect(audioContext.destination);
                            osc.frequency.setValueAtTime(200 + i * 80, audioContext.currentTime + i * 0.08);
                            gain.gain.setValueAtTime(0.06, audioContext.currentTime + i * 0.08);
                            gain.gain.exponentialRampToValueAtTime(0.001, audioContext.currentTime + i * 0.08 + 0.12);
                            osc.start(audioContext.currentTime + i * 0.08);
                            osc.stop(audioContext.currentTime + i * 0.08 + 0.12);
                        }
                        break;
                        
                    case 'tap':
                        // Neuer sanfter Tap-Sound
                        oscillator.frequency.setValueAtTime(800, audioContext.currentTime);
                        oscillator.frequency.exponentialRampToValueAtTime(400, audioContext.currentTime + 0.08);
                        gainNode.gain.setValueAtTime(0.05, audioContext.currentTime);
                        gainNode.gain.exponentialRampToValueAtTime(0.001, audioContext.currentTime + 0.08);
                        oscillator.start(audioContext.currentTime);
                        oscillator.stop(audioContext.currentTime + 0.08);
                        break;
                }
            } catch(e) {
                console.log('Audio not supported');
            }
        }

        // Haptic Feedback
        function vibrate(pattern) {
            if (settings.vibrationEnabled && 'vibrate' in navigator) {
                navigator.vibrate(pattern || [100]);
            }
        }

        // EXPLOSIVE KONFETTI ANIMATION - RESPONSIVE
        function showConfetti() {
            const confettiContainer = document.getElementById('confetti');
            const colors = ['#FF6B6B', '#4ECDC4', '#45B7D1', '#96CEB4', '#FFEAA7', '#DDA0DD', '#98D8C8', '#F7DC6F', '#BB8FCE'];
            const shapes = ['square', 'circle', 'triangle'];
            const emojis = ['🎉', '🎊', '⭐', '✨', '🎈', '🎁', '🏆', '👏'];
            
            // Responsive Konfetti-Anzahl basierend auf Bildschirmgröße
            const screenWidth = window.innerWidth;
            let confettiCount;
            let baseVelocity;
            let maxVelocity;
            
            if (screenWidth < 480) {
                // Kleine Handys
                confettiCount = 80;
                baseVelocity = 120;
                maxVelocity = 200;
            } else if (screenWidth < 768) {
                // Größere Handys / kleine Tablets
                confettiCount = 100;
                baseVelocity = 150;
                maxVelocity = 250;
            } else {
                // Tablets / Desktop
                confettiCount = 150;
                baseVelocity = 200;
                maxVelocity = 300;
            }
            
            for (let i = 0; i < confettiCount; i++) {
                const confettiPiece = document.createElement('div');
                confettiPiece.className = 'confetti-piece';
                
                // Zufällige Form wählen
                const shapeType = Math.random();
                if (shapeType < 0.6) {
                    // Geometrische Formen (60%)
                    const shape = shapes[Math.floor(Math.random() * shapes.length)];
                    confettiPiece.classList.add(shape);
                    
                    const color = colors[Math.floor(Math.random() * colors.length)];
                    if (shape === 'triangle') {
                        confettiPiece.style.borderBottomColor = color;
                    } else {
                        confettiPiece.style.backgroundColor = color;
                    }
                } else {
                    // Emojis (40%)
                    confettiPiece.classList.add('emoji');
                    confettiPiece.setAttribute('data-emoji', emojis[Math.floor(Math.random() * emojis.length)]);
                }
                
                // Explosive Bewegung berechnen - von Mitte nach außen (responsive)
                const angle = (Math.PI * 2 * i) / confettiCount; // Gleichmäßige Verteilung im Kreis
                const velocity = Math.random() * maxVelocity + baseVelocity; // Responsive Geschwindigkeit
                const dx = Math.cos(angle) * velocity; // X-Richtung
                const dy = Math.sin(angle) * velocity; // Y-Richtung
                const fx = (Math.random() - 0.5) * (screenWidth < 480 ? 100 : 200); // Responsive finale X-Drift
                
                // CSS-Variablen für die Animation setzen
                confettiPiece.style.setProperty('--dx', dx + 'px');
                confettiPiece.style.setProperty('--dy', dy + 'px');
                confettiPiece.style.setProperty('--fx', fx + 'px');
                
                // Animation anwenden (kürzere Dauer auf kleinen Bildschirmen)
                const duration = screenWidth < 480 ? 
                    (Math.random() * 1.5 + 2.5) : // 2.5-4s auf kleinen Bildschirmen
                    (Math.random() * 2 + 3);      // 3-5s auf größeren Bildschirmen
                
                confettiPiece.style.animation = `confetti-explode ${duration}s ease-out forwards`;
                confettiPiece.style.animationDelay = Math.random() * 0.5 + 's';
                
                confettiContainer.appendChild(confettiPiece);
                
                // Konfetti nach Animation entfernen
                setTimeout(() => {
                    if (confettiPiece.parentNode) {
                        confettiPiece.remove();
                    }
                }, (duration + 0.5) * 1000);
            }
        }

        // Settings Menu Functions
        function toggleSettingsMenu() {
            const menu = document.getElementById('settingsMenu');
            menu.classList.toggle('visible');
            updateSettingsDisplay();
        }

        function updateSettingsDisplay() {
            const soundStatus = document.getElementById('soundStatus');
            const vibrationStatus = document.getElementById('vibrationStatus');
            const themeStatus = document.getElementById('themeStatus');
            if (soundStatus) soundStatus.textContent = settings.soundsEnabled ? 'An' : 'Aus';
            if (vibrationStatus) vibrationStatus.textContent = settings.vibrationEnabled ? 'An' : 'Aus';
            if (themeStatus) themeStatus.textContent = settings.lightTheme ? 'Light' : 'Dark';
        }

        function showInstallModal() {
            toggleSettingsMenu();
            const isIOS = /iPad|iPhone|iPod/.test(navigator.userAgent);
            const isAndroid = /Android/.test(navigator.userAgent);
            
            let content = `
                <div style="text-align: center; margin-bottom: 24px;">
                    <div style="font-size: 48px; margin-bottom: 16px;">📱</div>
                    <p style="color: rgba(255,255,255,0.7); font-size: 16px; line-height: 1.5;">
                        Installiere Party Games als App auf deinem Gerät für die beste Erfahrung!
                    </p>
                </div>
            `;
            
            if (isIOS) {
                content += `
                    <div style="background: #1c1c1e; border-radius: 16px; padding: 20px; margin-bottom: 16px;">
                        <h3 style="margin-bottom: 16px; color: white;">📱 iOS Installation:</h3>
                        <ol style="color: rgba(255,255,255,0.8); line-height: 1.6; padding-left: 20px;">
                            <li>Tippe auf das <strong>Teilen-Symbol</strong> 📤 in Safari</li>
                            <li>Scrolle nach unten und wähle <strong>"Zum Home-Bildschirm"</strong></li>
                            <li>Tippe auf <strong>"Hinzufügen"</strong> in der oberen rechten Ecke</li>
                            <li>Die App erscheint jetzt auf deinem Home-Bildschirm! 🎉</li>
                        </ol>
                    </div>
                `;
            } else if (isAndroid) {
                content += `
                    <div style="background: #1c1c1e; border-radius: 16px; padding: 20px; margin-bottom: 16px;">
                        <h3 style="margin-bottom: 16px; color: white;">🤖 Android Installation:</h3>
                        <ol style="color: rgba(255,255,255,0.8); line-height: 1.6; padding-left: 20px;">
                            <li>Tippe auf das <strong>Menü-Symbol</strong> ⋮ in Chrome</li>
                            <li>Wähle <strong>"App installieren"</strong> oder <strong>"Zum Startbildschirm hinzufügen"</strong></li>
                            <li>Bestätige mit <strong>"Installieren"</strong></li>
                            <li>Die App ist jetzt in deinen Apps verfügbar! 🎉</li>
                        </ol>
                    </div>
                `;
            } else {
                content += `
                    <div style="background: #1c1c1e; border-radius: 16px; padding: 20px; margin-bottom: 16px;">
                        <h3 style="margin-bottom: 16px; color: white;">💻 Desktop Installation:</h3>
                        <ol style="color: rgba(255,255,255,0.8); line-height: 1.6; padding-left: 20px;">
                            <li>Klicke auf das <strong>Install-Symbol</strong> in der Adressleiste</li>
                            <li>Oder: Menü → <strong>"Party Games installieren"</strong></li>
                            <li>Bestätige die Installation</li>
                            <li>Die App ist jetzt als eigenständige App verfügbar! 🎉</li>
                        </ol>
                    </div>
                `;
            }
            
            content += `
                <div style="background: #1c1c1e; border-radius: 16px; padding: 16px; color: white; text-align: center;">
                    <strong>✨ Vorteile der App:</strong><br>
                    🚀 Schnellerer Start • 📱 Vollbild-Modus • 🔔 Keine Browser-Leiste
                </div>
            `;
            
            showModal('📱 App installieren', content);
        }

        function showComingSoonModal() {
            toggleSettingsMenu();
            
            const content = `
                <div style="text-align: center; margin-bottom: 24px;">
                    <div style="font-size: 48px; margin-bottom: 16px;">🚀</div>
                    <p style="color: rgba(255,255,255,0.7); font-size: 16px; line-height: 1.5;">
                        Kommende Features für Party Games - Sei gespannt!
                    </p>
                </div>
                
                <div style="margin-bottom: 20px;">
                    <div style="background: #1c1c1e; border-radius: 16px; padding: 16px; margin-bottom: 12px; color: white;">
                        <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 8px;">
                            <span style="font-size: 24px;">🎯</span>
                            <strong style="font-size: 16px;">Neue Spiele</strong>
                        </div>
                        <div style="font-size: 14px; opacity: 0.9;">
                            • Wahrheit oder Pflicht<br>
                            • Wer bin ich?<br>
                            • Story Builder<br>
                            • Schnelles Denken
                        </div>
                    </div>
                    
                    <div style="background: #1c1c1e; border-radius: 16px; padding: 16px; margin-bottom: 12px; color: white;">
                        <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 8px;">
                            <span style="font-size: 24px;">⚡</span>
                            <strong style="font-size: 16px;">Neue Features</strong>
                        </div>
                        <div style="font-size: 14px; opacity: 0.9;">
                            • Multiplayer-Modus<br>
                            • Eigene Wortlisten<br>
                            • Teams & Turniere<br>
                            • Audio-Hinweise
                        </div>
                    </div>
                    
                    <div style="background: #1c1c1e; border-radius: 16px; padding: 16px; color: white;">
                        <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 8px;">
                            <span style="font-size: 24px;">🎨</span>
                            <strong style="font-size: 16px;">Verbesserungen</strong>
                        </div>
                        <div style="font-size: 14px; opacity: 0.9;">
                            • Personalisierte Avatare<br>
                            • Mehr Themes<br>
                            • Erweiterte Statistiken<br>
                            • Social Features
                        </div>
                    </div>
                </div>
                
                <div style="background: #1c1c1e; border-radius: 16px; padding: 16px; text-align: center;">
                    <div style="font-size: 14px; color: rgba(255,255,255,0.8); margin-bottom: 8px;">
                        💡 <strong>Hast du Ideen?</strong>
                    </div>
                    <div style="font-size: 13px; color: rgba(255,255,255,0.6);">
                        Lass uns wissen, welche Features du dir wünschst!
                    </div>
                </div>
            `;
            
            showModal('🚀 Coming Soon', content);
        }

        function toggleSounds() {
            settings.soundsEnabled = !settings.soundsEnabled;
            updateSettingsDisplay();
            if (settings.soundsEnabled) playSound('tap'); // Nur spielen wenn sounds an sind
            toggleSettingsMenu();
        }

        function toggleVibration() {
            settings.vibrationEnabled = !settings.vibrationEnabled;
            updateSettingsDisplay();
            vibrate([50]);
            playSound('tap');
            toggleSettingsMenu();
        }

        // Modal Functions
        function showModal(title, content) {
            const modalBody = document.getElementById('modalBody');
            if (modalBody) {
                modalBody.innerHTML = `<h2 class="modal-title">${title}</h2>${content}`;
                document.getElementById('modalOverlay').classList.add('visible');
            }
        }

        function closeModal() {
            document.getElementById('modalOverlay').classList.remove('visible');
        }

        function toggleTheme() {
            settings.lightTheme = !settings.lightTheme;
            document.body.classList.toggle('light-theme', settings.lightTheme);
            updateSettingsDisplay();
            playSound('tap');
            toggleSettingsMenu();
        }

        function showStatsModal() {
            toggleSettingsMenu();
            const totalGames = playerStats.gamesPlayed;
            const averageGameTime = playerStats.totalPlayTime > 0 ? 
                Math.round(playerStats.totalPlayTime / playerStats.gamesPlayed) + 's' : 'N/A';
            const playedCategories = getPlayedCategories();
            
            const content = `
                <div class="stats-grid">
                    <div class="stat-item">
                        <div class="stat-value">${totalGames}</div>
                        <div class="stat-label">Spiele gespielt</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value">${averageGameTime}</div>
                        <div class="stat-label">⌀ Spielzeit</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value">${playerStats.fastestGame || 'N/A'}</div>
                        <div class="stat-label">Schnellstes Spiel</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value">${playerStats.longestGame || 'N/A'}</div>
                        <div class="stat-label">Längstes Spiel</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value">${playedCategories}</div>
                        <div class="stat-label">Kategorien gespielt</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value">${APP_VERSION}</div>
                        <div class="stat-label">App Version</div>
                    </div>
                </div>
                <button class="share-button" onclick="shareStats()">
                    📊 Stats teilen
                </button>
            `;
            showModal('📊 Deine Statistiken', content);
        }

        function getPlayedCategories() {
            if (gameHistory.length === 0) return '0/' + Object.keys(CATEGORY_INFO).length;
            
            const categories = new Set();
            gameHistory.forEach(game => {
                // Determine category based on game word
                Object.keys(WORD_CATEGORIES).forEach(categoryKey => {
                    if (categoryKey !== 'alle') {
                        const wordsInCategory = WORD_CATEGORIES[categoryKey];
                        if (wordsInCategory.some(wordObj => wordObj.word.toLowerCase() === game.word.toLowerCase())) {
                            categories.add(categoryKey);
                        }
                    }
                });
            });
            
            return `${categories.size}/${Object.keys(CATEGORY_INFO).length - 1}`; // -1 because "alle" doesn't count
        }

        function shareStats() {
            const totalGames = playerStats.gamesPlayed;
            const unlockedAchievements = Object.keys(achievements).filter(key => achievements[key]).length;
            const playedCategories = getPlayedCategories();
            
            const shareText = `🎭 Meine Impostor Stats:\n\n` +
                `🎮 ${totalGames} Spiele gespielt\n` +
                `⚡ Schnellstes Spiel: ${playerStats.fastestGame || 'N/A'}\n` +
                `🕐 Längstes Spiel: ${playerStats.longestGame || 'N/A'}\n` +
                `🎯 Kategorien: ${playedCategories}\n` +
                `🏆 ${unlockedAchievements} Erfolge freigeschaltet\n\n` +
                `Spiele auch mit: party-games.me 🎯`;

            if (navigator.share) {
                navigator.share({
                    title: 'Meine Impostor Stats',
                    text: shareText
                }).catch(err => {
                    copyToClipboard(shareText);
                });
            } else {
                copyToClipboard(shareText);
            }
        }

        function showHistoryModal() {
            toggleSettingsMenu();
            const recentGames = gameHistory.slice(-10).reverse();
            let content = '<div style="max-height: 300px; overflow-y: auto;">';
            
            if (recentGames.length === 0) {
                content += '<p style="text-align: center; opacity: 0.7; font-size: 16px; padding: 40px 0;">Noch keine Spiele gespielt</p>';
            } else {
                recentGames.forEach((game) => {
                    const date = new Date(game.date).toLocaleDateString('de-DE');
                    const timeOfDay = new Date(game.date).toLocaleTimeString('de-DE', {hour: '2-digit', minute: '2-digit'});
                    
                    content += `
                        <div class="history-item">
                            <div>
                                <strong style="font-size: 16px;">${game.word}</strong><br>
                                <small style="color: rgba(255,255,255,0.6); font-size: 13px;">${date} ${timeOfDay} • ${game.players} Spieler • ${game.duration}</small>
                            </div>
                            <div style="font-size: 24px;">🎭</div>
                        </div>
                    `;
                });
            }
            
            content += '</div>';
            content += `<button class="share-button" onclick="shareHistory()">📚 Historie teilen</button>`;
            showModal('📚 Spiel-Historie', content);
        }

        function shareHistory() {
            if (gameHistory.length === 0) {
                showNotification('📚', 'Noch keine Spiele gespielt!');
                return;
            }
            
            const recentGames = gameHistory.slice(-5);
            const shareText = `🎭 Meine letzten Impostor Spiele:\n\n` +
                recentGames.map(game => 
                    `🎯 ${game.word} (${game.players} Spieler, ${game.duration})`
                ).join('\n') +
                `\n\nSpiele auch mit: party-games.me 🎮`;

            if (navigator.share) {
                navigator.share({
                    title: 'Meine Impostor Spiele',
                    text: shareText
                }).catch(err => {
                    copyToClipboard(shareText);
                });
            } else {
                copyToClipboard(shareText);
            }
        }

        function showAchievementsModal() {
            toggleSettingsMenu();
            let content = '<div style="max-height: 300px; overflow-y: auto;">';
            
            Object.keys(ACHIEVEMENTS).forEach(key => {
                const achievement = ACHIEVEMENTS[key];
                const unlocked = achievements[key] || false;
                content += `
                    <div class="achievement-item ${unlocked ? 'unlocked' : ''}">
                        <div style="display: flex; align-items: center;">
                            <span class="achievement-icon">${achievement.icon}</span>
                            <div>
                                <strong style="font-size: 16px;">${achievement.name}</strong><br>
                                <small style="color: rgba(255,255,255,0.6); font-size: 13px;">${achievement.description}</small>
                            </div>
                        </div>
                        <div style="font-size: 20px;">${unlocked ? '✅' : '❌'}</div>
                    </div>
                `;
            });
            
            content += '</div>';
            content += `<button class="share-button" onclick="shareAchievements()">🏆 Erfolge teilen</button>`;
            showModal('🏆 Erfolge', content);
        }

        function shareAchievements() {
            const unlockedAchievements = Object.keys(ACHIEVEMENTS).filter(key => achievements[key]);
            const totalAchievements = Object.keys(ACHIEVEMENTS).length;
            
            if (unlockedAchievements.length === 0) {
                showNotification('🏆', 'Noch keine Erfolge freigeschaltet!');
                return;
            }
            
            const shareText = `🏆 Meine Impostor Erfolge (${unlockedAchievements.length}/${totalAchievements}):\n\n` +
                unlockedAchievements.map(key => 
                    `${ACHIEVEMENTS[key].icon} ${ACHIEVEMENTS[key].name}`
                ).join('\n') +
                `\n\nSpiele auch mit: party-games.me 🎮`;

            if (navigator.share) {
                navigator.share({
                    title: 'Meine Impostor Erfolge',
                    text: shareText
                }).catch(err => {
                    copyToClipboard(shareText);
                });
            } else {
                copyToClipboard(shareText);
            }
        }

        function copyToClipboard(text) {
            if (navigator.clipboard) {
                navigator.clipboard.writeText(text).then(() => {
                    showNotification('📋', 'In Zwischenablage kopiert!');
                }).catch(() => {
                    fallbackCopyTextToClipboard(text);
                });
            } else {
                fallbackCopyTextToClipboard(text);
            }
        }

        function fallbackCopyTextToClipboard(text) {
            const textArea = document.createElement("textarea");
            textArea.value = text;
            textArea.style.position = "fixed";
            textArea.style.left = "-999999px";
            textArea.style.top = "-999999px";
            document.body.appendChild(textArea);
            textArea.focus();
            textArea.select();
            
            try {
                document.execCommand('copy');
                showNotification('📋', 'In Zwischenablage kopiert!');
            } catch (err) {
                showNotification('❌', 'Kopieren fehlgeschlagen');
            }
            
            document.body.removeChild(textArea);
        }

        function showNotification(icon, message) {
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 100px;
                right: 20px;
                background: #1c1c1e;
                color: white;
                padding: 16px 20px;
                border-radius: 20px;
                font-weight: 600;
                z-index: 10000;
                animation: slideInFromRight 0.5s ease-out;
                max-width: 300px;
                box-shadow: 0 16px 40px rgba(0,0,0,0.3);
                backdrop-filter: blur(10px);
            `;
            
            notification.innerHTML = `
                <div style="display: flex; align-items: center; gap: 12px;">
                    <span style="font-size: 24px;">${icon}</span>
                    <div style="font-size: 14px;">${message}</div>
                </div>
            `;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.animation = 'slideOutToRight 0.5s ease-in';
                setTimeout(() => {
                    if (notification.parentNode) {
                        notification.remove();
                    }
                }, 500);
            }, 2000);
        }

        // Stats and Achievement Functions
        function checkAchievements() {
            let newAchievements = [];
            
            // First Game
            if (!achievements.firstGame && playerStats.gamesPlayed >= 1) {
                achievements.firstGame = true;
                newAchievements.push(ACHIEVEMENTS.firstGame);
            }
            
            // Veteran - 25 Spiele
            if (!achievements.veteran && playerStats.gamesPlayed >= 25) {
                achievements.veteran = true;
                newAchievements.push(ACHIEVEMENTS.veteran);
            }
            
            // Dedicated - 100 Spiele
            if (!achievements.dedicated && playerStats.gamesPlayed >= 100) {
                achievements.dedicated = true;
                newAchievements.push(ACHIEVEMENTS.dedicated);
            }
            
            // Speed Runner - unter 30 Sekunden
            if (!achievements.speedRunner && playerStats.fastestGame && parseInt(playerStats.fastestGame) < 30) {
                achievements.speedRunner = true;
                newAchievements.push(ACHIEVEMENTS.speedRunner);
            }
            
            // Marathon - über 10 Minuten (600 Sekunden)
            if (!achievements.marathon && playerStats.longestGame && parseInt(playerStats.longestGame) > 600) {
                achievements.marathon = true;
                newAchievements.push(ACHIEVEMENTS.marathon);
            }
            
            // Social - mit 10+ Personen gespielt
            if (!achievements.social && gameHistory.some(game => game.players >= 10)) {
                achievements.social = true;
                newAchievements.push(ACHIEVEMENTS.social);
            }
            
            // Explorer - alle Kategorien gespielt
            const totalCategories = Object.keys(CATEGORY_INFO).length - 1; // -1 for "alle"
            const playedCategoriesCount = parseInt(getPlayedCategories().split('/')[0]);
            if (!achievements.explorer && playedCategoriesCount >= totalCategories) {
                achievements.explorer = true;
                newAchievements.push(ACHIEVEMENTS.explorer);
            }
            
            // Curious achievement is unlocked through Easter Egg
            // (no automatic checking needed here)
            
            if (newAchievements.length > 0) {
                showAchievementNotification(newAchievements);
            }
        }

        function showAchievementNotification(newAchievements) {
            // Show confetti for achievement unlock
            showConfetti();
            
            newAchievements.forEach((achievement, index) => {
                setTimeout(() => {
                    const notification = document.createElement('div');
                    notification.style.cssText = `
                        position: fixed;
                        top: 100px;
                        right: 20px;
                        background: #1c1c1e;
                        color: white;
                        padding: 16px 20px;
                        border-radius: 20px;
                        font-weight: 600;
                        z-index: 10000;
                        animation: slideInFromRight 0.5s ease-out;
                        max-width: 300px;
                        box-shadow: 0 16px 40px rgba(0,0,0,0.2);
                        backdrop-filter: blur(10px);
                        border: 2px solid #4CAF50;
                    `;
                    
                    notification.innerHTML = `
                        <div style="display: flex; align-items: center; gap: 12px;">
                            <span style="font-size: 28px;">${achievement.icon}</span>
                            <div>
                                <div style="font-size: 16px; font-weight: 700;">Erfolg freigeschaltet!</div>
                                <div style="font-size: 14px; opacity: 0.8;">${achievement.name}</div>
                            </div>
                        </div>
                    `;
                    
                    document.body.appendChild(notification);
                    playSound('success');
                    vibrate([100, 50, 100]);
                    
                    setTimeout(() => {
                        notification.style.animation = 'slideOutToRight 0.5s ease-in';
                        setTimeout(() => {
                            if (notification.parentNode) {
                                notification.remove();
                            }
                        }, 500);
                    }, 3000);
                }, index * 500);
            });
        }

        function showScreen(screenId) {
            document.querySelectorAll('.screen').forEach(screen => {
                screen.classList.add('hidden');
            });
            document.getElementById(screenId).classList.remove('hidden');
            
            const settingsIcon = document.getElementById('settingsIcon');
            const infoIcon = document.getElementById('infoIcon');
            
            if (settingsIcon && infoIcon) {
                if (screenId === 'modeSelectScreen') {
                    settingsIcon.style.display = 'flex';
                    infoIcon.style.display = 'flex';
                } else {
                    settingsIcon.style.display = 'none';
                    infoIcon.style.display = 'none';
                }
            }
        }

        function showInfoModal() {
            const content = `
                <div style="text-align: center; margin-bottom: 28px;">
                    <div style="font-size: 48px; margin-bottom: 16px;">🎮</div>
                    <p style="color: rgba(255,255,255,0.7); font-size: 16px; line-height: 1.5;">
                        Die ultimative Party-App für unvergessliche Momente mit deinen Freunden!
                    </p>
                </div>
                
                <div style="margin-bottom: 24px;">
                    <div style="background: #1c1c1e; border-radius: 20px; padding: 20px; margin-bottom: 16px; color: white;">
                        <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 12px;">
                            <span style="font-size: 24px;">⚡</span>
                            <strong style="font-size: 17px;">Features</strong>
                        </div>
                        <div style="font-size: 15px; opacity: 0.95; line-height: 1.6;">
                            • Komplett offline spielbar<br>
                            • Responsive für alle Geräte<br>
                            • Keine Registrierung erforderlich<br>
                            • Kostenlos & werbefrei<br>
                            • Über ${CATEGORY_INFO.alle.count} Wörter in ${Object.keys(CATEGORY_INFO).length - 1} Kategorien
                        </div>
                    </div>
                    
                    <div style="background: #1c1c1e; border-radius: 20px; padding: 20px; color: white;">
                        <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 12px;">
                            <span style="font-size: 24px;">🎯</span>
                            <strong style="font-size: 17px;">So einfach geht's</strong>
                        </div>
                        <div style="font-size: 15px; opacity: 0.95; line-height: 1.6;">
                            1. Spiel auswählen & Einstellungen anpassen<br>
                            2. Gerät an alle Mitspieler weitergeben<br>
                            3. Jeder schaut sich seine Rolle an<br>
                            4. Spielen & Spaß haben!
                        </div>
                    </div>
                </div>
                
                <div style="background: #1c1c1e; border-radius: 16px; padding: 18px; text-align: center; border: 1px solid rgba(255,255,255,0.08);">
                    <div style="font-size: 15px; color: white; font-weight: 600;">
                        Version ${APP_VERSION}
                    </div>
                    <div style="font-size: 13px; color: rgba(255,255,255,0.6); margin-top: 4px;">
                        Regelmäßige Updates mit neuen Spielen
                    </div>
                </div>
            `;
            
            showModal('App Info', content);
        }

        // WIRKLICH SMOOTH TRANSITION
        function showCleanTransition(callback) {
            const transition = document.getElementById('screenTransition');
            
            // Show black overlay - ULTRA SMOOTH
            transition.classList.add('active');
            
            setTimeout(() => {
                // Change to impostor background
                transition.classList.add('impostor');
                
                setTimeout(() => {
                    // Execute callback
                    callback();
                    
                    setTimeout(() => {
                        // Hide overlay - ULTRA SMOOTH
                        transition.classList.remove('active', 'impostor');
                    }, 25); /* SEHR SCHNELL */
                }, 100); /* KURZ */
            }, 75); /* KURZ */
        }

        function handleCardClick(event) {
            const card = event.currentTarget;
            const gameType = card.getAttribute('data-game');
            
            if (gameType === 'impostor') {
                showCleanTransition(() => {
                    showImpostorSettings();
                });
            }
        }

        function showModeSelect() {
            showScreen('modeSelectScreen');
        }

        function showImpostorSettings() {
            showScreen('impostorScreen');
            updateGameSettingsDisplay();
        }

        function showGame() {
            showScreen('gameScreen');
            updateGameDisplay();
        }

        function showGameStarted() {
            showScreen('gameStartedScreen');
            updateGameStartedDisplay();
        }

        function showRoles() {
            showScreen('endScreen');
            displayRoles();
            showConfetti();
            playSound('success');
            vibrate([200, 100, 200]);
        }

        // Scroll to specific card and update indicators
        function scrollToCard(cardIndex) {
            const container = document.getElementById('gamesContainer');
            const gameCard = container.querySelectorAll('.game-card')[cardIndex];
            if (!gameCard) return;
            
            const cardWidth = gameCard.offsetWidth + 20;
            container.scrollTo({
                left: cardIndex * cardWidth,
                behavior: 'smooth'
            });
            
            // Update indicators immediately
            setTimeout(() => {
                updateCardIndicators();
            }, 100);
        }

        // Update card indicators based on scroll position
        function updateCardIndicators() {
            const container = document.getElementById('gamesContainer');
            const cards = container.querySelectorAll('.game-card');
            
            if (cards.length === 0) return;
            
            const containerRect = container.getBoundingClientRect();
            const containerCenter = containerRect.left + containerRect.width / 2;
            
            let activeIndex = 0;
            let minDistance = Infinity;
            
            cards.forEach((card, index) => {
                const cardRect = card.getBoundingClientRect();
                const cardCenter = cardRect.left + cardRect.width / 2;
                const distance = Math.abs(cardCenter - containerCenter);
                
                if (distance < minDistance) {
                    minDistance = distance;
                    activeIndex = index;
                }
            });
            
            // Update indicators
            document.querySelectorAll('.snap-dot').forEach((dot, index) => {
                if (index === activeIndex) {
                    dot.classList.add('active');
                } else {
                    dot.classList.remove('active');
                }
            });
        }

        // Settings Functions
        function changePlayerCount(delta) {
            gameState.totalPlayers = Math.max(3, Math.min(20, gameState.totalPlayers + delta));
            if (gameState.impostors >= Math.floor(gameState.totalPlayers / 2)) {
                gameState.impostors = Math.max(1, Math.floor(gameState.totalPlayers / 2) - 1);
            }
            
            // Update player names array to match new player count
            while (gameState.playerNames.length < gameState.totalPlayers) {
                gameState.playerNames.push(`Spieler ${gameState.playerNames.length + 1}`);
            }
            if (gameState.playerNames.length > gameState.totalPlayers) {
                gameState.playerNames = gameState.playerNames.slice(0, gameState.totalPlayers);
            }
            
            updateGameSettingsDisplay();
            playSound('card-flip');
        }

        function changeImpostorCount(delta) {
            gameState.impostors = Math.max(1, Math.min(Math.floor(gameState.totalPlayers / 2), gameState.impostors + delta));
            updateGameSettingsDisplay();
            playSound('card-flip');
        }

        function toggleTimer() {
            gameState.timerEnabled = !gameState.timerEnabled;
            const toggle = document.getElementById('timerToggle');
            const minutesRow = document.getElementById('timerMinutesRow');
            
            toggle.classList.toggle('active', gameState.timerEnabled);
            minutesRow.style.display = gameState.timerEnabled ? 'flex' : 'none';
            playSound('card-flip');
        }

        function changeTimerMinutes(delta) {
            gameState.timerMinutes = Math.max(1, Math.min(10, gameState.timerMinutes + delta));
            document.getElementById('timerMinutesCount').textContent = gameState.timerMinutes;
            playSound('card-flip');
        }

        function toggleHints() {
            gameState.hintsEnabled = !gameState.hintsEnabled;
            document.getElementById('hintsToggle').classList.toggle('active', gameState.hintsEnabled);
            playSound('card-flip');
        }

        function updateGameSettingsDisplay() {
            document.getElementById('playersCount').textContent = gameState.totalPlayers;
            document.getElementById('impostorsCount').textContent = gameState.impostors;
            document.getElementById('timerMinutesCount').textContent = gameState.timerMinutes;
            
            // Update timer toggle and minutes row visibility
            const timerToggle = document.getElementById('timerToggle');
            const minutesRow = document.getElementById('timerMinutesRow');
            timerToggle.classList.toggle('active', gameState.timerEnabled);
            minutesRow.style.display = gameState.timerEnabled ? 'flex' : 'none';
            
            // Update category button
            updateCategoryButton();
        }

        // Game Logic
        function generateGame() {
            // Select words based on selected categories
            let selectedWords = [];
            
            if (gameState.selectedCategories.includes('alle') || gameState.selectedCategories.length === 0) {
                // Use all categories
                Object.keys(WORD_CATEGORIES).forEach(categoryKey => {
                    if (categoryKey !== 'alle') {
                        selectedWords = selectedWords.concat(WORD_CATEGORIES[categoryKey]);
                    }
                });
            } else {
                // Use only selected categories
                gameState.selectedCategories.forEach(categoryKey => {
                    if (WORD_CATEGORIES[categoryKey]) {
                        selectedWords = selectedWords.concat(WORD_CATEGORIES[categoryKey]);
                    }
                });
            }
            
            const selectedWord = selectedWords[Math.floor(Math.random() * selectedWords.length)];
            gameState.gameWord = selectedWord.word;
            gameState.gameHint = selectedWord.hint;
            
            // Generate impostor assignments
            gameState.impostorPlayers = [];
            while (gameState.impostorPlayers.length < gameState.impostors) {
                const randomPlayer = Math.floor(Math.random() * gameState.totalPlayers) + 1;
                if (!gameState.impostorPlayers.includes(randomPlayer)) {
                    gameState.impostorPlayers.push(randomPlayer);
                }
            }
            
            // Generate player emojis - KEEP ORDER CONSISTENT WITH NAMES
            gameState.playerEmojis = [];
            for (let i = 0; i < gameState.totalPlayers; i++) {
                gameState.playerEmojis.push(coolEmojis[i % coolEmojis.length]);
            }
        }

        function startGame() {
            // Initialize player names if not already set
            if (gameState.playerNames.length === 0) {
                initializePlayerNames();
            }
            
            generateGame();
            // FIXED: Zufälliger Startspieler wird erst bei showGameStarted() gesetzt
            gameState.currentPlayer = 1; // Trotzdem bei Spieler 1 beginnen für die Kartenverteilung
            gameState.gameStartTime = Date.now();
            showScreen('gameScreen');
            updateGameDisplay();
            playSound('shuffle');
            vibrate([50, 50, 50]);
        }

        function updateGameDisplay() {
            const playerName = gameState.playerNames[gameState.currentPlayer - 1] || `Spieler ${gameState.currentPlayer}`;
            document.getElementById('playerTitle').textContent = playerName;
            document.getElementById('playerEmoji').textContent = gameState.playerEmojis[gameState.currentPlayer - 1] || '👤';
            
            if (gameState.currentPlayer < gameState.totalPlayers) {
                document.getElementById('nextButton').textContent = 'Weitergeben';
            } else {
                document.getElementById('nextButton').textContent = 'Spiel starten';
            }
            
            // WICHTIG: Button muss versteckt bleiben bis erste Aufdeckung erfolgt ist
            const nextButton = document.getElementById('nextButton');
            nextButton.classList.remove('visible');
            
            // Reset hasRevealed for new player
            gameState.hasRevealed = false;
            
            // Reset instruction text to initial state
            const instructionText = document.getElementById('instructionText');
            if (instructionText) {
                instructionText.style.opacity = '1';
                instructionText.textContent = 'Ziehe deine Karte nach oben, um das Wort zu sehen. Achte darauf, dass niemand es sieht.';
            }
        }

        // IMPROVED: Show role with hold-to-reveal functionality
        function showRole() {
            const isImpostor = gameState.impostorPlayers.includes(gameState.currentPlayer);
            const roleIcon = document.getElementById('roleIcon');
            const roleText = document.getElementById('roleText');
            const wordOrHint = document.getElementById('wordOrHint');
            
            if (isImpostor) {
                roleIcon.textContent = '✕';
                roleIcon.className = 'role-icon impostor';
                roleText.textContent = ''; // REMOVED: "Du bist Impostor!" text
                if (gameState.hintsEnabled) {
                    wordOrHint.innerHTML = `<div class="hint-display">Tipp: ${gameState.gameHint}</div>`;
                } else {
                    wordOrHint.innerHTML = '<div class="hint-display">Kein Tipp verfügbar</div>';
                }
            } else {
                roleIcon.textContent = '✓';
                roleIcon.className = 'role-icon normal';
                roleText.textContent = '';
                wordOrHint.innerHTML = `<div class="word-display">${gameState.gameWord}</div>`;
            }
            
            // Show the revealed content
            document.getElementById('revealedContent').classList.add('visible');
            document.getElementById('playerCard').classList.add('lifted');
            
            // Hide instruction text while revealing
            const instructionText = document.getElementById('instructionText');
            if (instructionText) {
                instructionText.style.opacity = '0';
            }
            
            playSound('tap');
            vibrate([30]);
        }

        function hideRole() {
            // Hide role content first
            document.getElementById('revealedContent').classList.remove('visible');
            document.getElementById('playerCard').classList.remove('lifted');
            
            // Mark that this player has revealed their card
            gameState.hasRevealed = true;
            
            // Show instruction text again and update to next step
            const instructionText = document.getElementById('instructionText');
            if (instructionText) {
                instructionText.style.opacity = '1';
                instructionText.textContent = 'Gerät an den nächsten Spieler weitergeben';
            }
            
            // Show next button ONLY after first reveal and 400ms delay when card is completely closed
            setTimeout(() => {
                if (gameState.hasRevealed) {
                    const nextButton = document.getElementById('nextButton');
                    nextButton.classList.add('visible');
                }
            }, 400);
        }

        function handleNextPlayer() {
            const nextButton = document.getElementById('nextButton');
            
            if (gameState.currentPlayer < gameState.totalPlayers) {
                nextButton.style.transform = 'scale(0.96)';
                setTimeout(() => {
                    nextButton.style.transform = 'scale(1)';
                }, 150);
                
                const playerCard = document.getElementById('playerCard');
                playerCard.classList.add('flipping');
                playSound('card-flip');
                vibrate([50]);
                
                // Hide button during transition
                nextButton.classList.remove('visible');
                
                setTimeout(() => {
                    gameState.currentPlayer++;
                    updateGameDisplay();
                    playerCard.classList.remove('flipping');
                }, 600);
                
            } else {
                nextButton.style.transform = 'scale(0.96)';
                nextButton.textContent = 'Spiel startet...';
                
                setTimeout(() => {
                    nextButton.style.transform = 'scale(1)';
                    showGameStarted();
                    nextButton.textContent = 'Spiel starten';
                    nextButton.classList.remove('visible');
                    playSound('success');
                    vibrate([100, 50, 100]);
                }, 800);
            }
        }

        function updateGameStartedDisplay() {
            // FIXED: Zufälliger Startspieler wird HIER gesetzt, nicht beim Start
            gameState.startingPlayer = Math.floor(Math.random() * gameState.totalPlayers) + 1;
            
            const starterName = gameState.playerNames[gameState.startingPlayer - 1] || `Spieler ${gameState.startingPlayer}`;
            const starterText = document.getElementById('starterText');
            starterText.textContent = `${starterName} beginnt`;
            starterText.classList.remove('shrunk');
            
            // Show timer if enabled
            if (gameState.timerEnabled) {
                gameState.timeLeft = gameState.timerMinutes * 60;
                document.getElementById('timerDisplay').classList.remove('hidden');
                startTimer();
            } else {
                document.getElementById('timerDisplay').classList.add('hidden');
            }
            
            // Shrink text after 5 seconds
            setTimeout(() => {
                starterText.classList.add('shrunk');
            }, 5000);
        }

        function startTimer() {
            if (gameState.timer) {
                clearInterval(gameState.timer);
            }
            
            updateTimerDisplay();
            gameState.timer = setInterval(() => {
                gameState.timeLeft--;
                updateTimerDisplay();
                
                // Warning vibrations at 10 seconds
                if (gameState.timeLeft === 10) {
                    vibrate([200, 200, 200]);
                }
                
                if (gameState.timeLeft <= 0) {
                    clearInterval(gameState.timer);
                    gameState.timer = null;
                    vibrate([500, 200, 500]);
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(gameState.timeLeft / 60);
            const seconds = gameState.timeLeft % 60;
            const display = document.getElementById('timerDisplay');
            display.textContent = `${minutes}:${seconds.toString().padStart(2, '0')}`;
            
            // Change color when time is running out
            if (gameState.timeLeft <= 30) {
                display.style.background = 'rgba(244, 67, 54, 0.8)';
            } else if (gameState.timeLeft <= 60) {
                display.style.background = 'rgba(255, 193, 7, 0.8)';
            }
        }

        function displayRoles() {
            const rolesList = document.getElementById('rolesList');
            rolesList.innerHTML = '';
            
            // Calculate game duration
            gameState.roundDuration = Math.round((Date.now() - gameState.gameStartTime) / 1000);
            
            // Update stats - OHNE IMPOSTOR TRACKING
            playerStats.gamesPlayed++;
            playerStats.totalPlayTime += gameState.roundDuration;
            
            // Update fastest and longest game
            if (!playerStats.fastestGame || gameState.roundDuration < parseInt(playerStats.fastestGame)) {
                playerStats.fastestGame = gameState.roundDuration + 's';
            }
            if (!playerStats.longestGame || gameState.roundDuration > parseInt(playerStats.longestGame)) {
                playerStats.longestGame = gameState.roundDuration + 's';
            }
            
            // Add to history
            gameHistory.push({
                date: Date.now(),
                word: gameState.gameWord,
                players: gameState.totalPlayers,
                duration: gameState.roundDuration + 's'
            });
            
            // Keep only last 50 games
            if (gameHistory.length > 50) {
                gameHistory.shift();
            }
            
            checkAchievements();
            
            for (let i = 1; i <= gameState.totalPlayers; i++) {
                const isImpostor = gameState.impostorPlayers.includes(i);
                const playerEmoji = gameState.playerEmojis[i-1] || '👤';
                const playerName = gameState.playerNames[i-1] || `Spieler ${i}`;
                
                const roleItem = document.createElement('div');
                roleItem.className = 'role-item';
                
                const rolePlayer = document.createElement('div');
                rolePlayer.className = 'role-player';
                
                const roleIcon = document.createElement('div');
                roleIcon.style.cssText = `width: 32px; height: 32px; font-size: 16px; margin-right: 14px; display: flex; align-items: center; justify-content: center; border-radius: 50%; background: ${isImpostor ? '#f44336' : '#4CAF50'}; color: white; font-weight: bold;`;
                roleIcon.textContent = isImpostor ? '✕' : '✓';
                
                const playerText = document.createElement('span');
                playerText.textContent = `${playerEmoji} ${playerName}`;
                
                rolePlayer.appendChild(roleIcon);
                rolePlayer.appendChild(playerText);
                
                const roleResult = document.createElement('div');
                roleResult.className = 'role-result';
                
                if (isImpostor) {
                    roleResult.innerHTML = `<strong>Impostor</strong>` + 
                        (gameState.hintsEnabled && gameState.gameHint ? `<br><small>Tipp: ${gameState.gameHint}</small>` : '');
                } else {
                    roleResult.innerHTML = `<strong>${gameState.gameWord}</strong>`;
                }
                
                roleItem.appendChild(rolePlayer);
                roleItem.appendChild(roleResult);
                rolesList.appendChild(roleItem);
            }
        }

        // Event Listeners
        document.addEventListener('keydown', function(event) {
            if (document.getElementById('gameScreen').classList.contains('hidden')) return;
            if (event.code === 'Space' || event.key === ' ') {
                event.preventDefault();
                showRole();
            }
        });

        document.addEventListener('keyup', function(event) {
            if (document.getElementById('gameScreen').classList.contains('hidden')) return;
            if (event.code === 'Space' || event.key === ' ') {
                event.preventDefault();
                hideRole();
            }
        });

        document.addEventListener('click', function(event) {
            if (!event.target.closest('.dropdown') && 
                !event.target.closest('.settings-menu') && 
                !event.target.closest('.settings-icon') && 
                !event.target.closest('.names-modal') &&
                !event.target.closest('.categories-modal')) {
                const settingsMenu = document.getElementById('settingsMenu');
                if (settingsMenu) settingsMenu.classList.remove('visible');
            }
        });

        document.addEventListener('contextmenu', function(e) {
            e.preventDefault();
        });

        // Initialize with scroll listener for indicators
        function initialize() {
            // Initialize player names
            initializePlayerNames();
            
            // Initialize categories
            gameState.selectedCategories = ['alle'];
            
            updateGameSettingsDisplay();
            updateSettingsDisplay();
            
            // Add scroll listener for card indicators
            const gamesContainer = document.getElementById('gamesContainer');
            if (gamesContainer) {
                gamesContainer.addEventListener('scroll', updateCardIndicators);
                // Initial indicator update
                setTimeout(updateCardIndicators, 100);
            }
            
            // Apply saved theme
            if (settings.lightTheme) {
                document.body.classList.add('light-theme');
            }
            
            showModeSelect();
        }

        // Wait for DOM to be ready
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initialize);
        } else {
            initialize();
        }
    </script>
</body>
</html>
